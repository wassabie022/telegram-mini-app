{"version":3,"file":"index.cjs","sources":["../../transformers/dist/index.js","../src/classnames/classNames.ts","../src/classnames/mergeClassNames.ts","../../bridge/dist/index.js","../../navigation/dist/index.js","../../signals/dist/index.js","../src/scopes/globals.ts","../src/utils/subAndCall.ts","../src/scopes/components/back-button/back-button.ts","../src/errors.ts","../src/scopes/createMountFn.ts","../src/scopes/components/biometry/signals.ts","../src/scopes/withIsSupported.ts","../src/scopes/components/biometry/eventToState.ts","../src/scopes/components/biometry/requestBiometry.ts","../src/scopes/components/biometry/methods.ts","../src/scopes/components/closing-behavior/closing-behavior.ts","../src/scopes/components/cloud-storage/cloud-storage.ts","../src/scopes/components/haptic-feedback/haptic-feedback.ts","../src/scopes/components/init-data/init-data.ts","../src/scopes/components/init-data/parseInitData.ts","../src/scopes/components/invoice/invoice.ts","../src/utils/isColorDark.ts","../src/scopes/components/theme-params/signals.ts","../src/scopes/components/main-button/signals.ts","../src/scopes/components/main-button/methods.ts","../src/scopes/withSupports.ts","../src/scopes/components/theme-params/parseThemeParams.ts","../src/scopes/components/theme-params/methods.ts","../src/scopes/components/mini-app/signals.ts","../src/scopes/components/mini-app/methods.ts","../src/scopes/components/popup/prepareParams.ts","../src/scopes/components/popup/popup.ts","../src/scopes/components/qr-scanner/qr-scanner.ts","../src/scopes/components/secondary-button/signals.ts","../src/scopes/components/secondary-button/methods.ts","../src/scopes/components/settings-button/settings-button.ts","../src/scopes/components/swipe-behavior/swipe-behavior.ts","../src/scopes/components/viewport/signals.ts","../src/scopes/components/viewport/static.ts","../src/scopes/components/viewport/methods.ts","../src/scopes/utilities/links/links.ts","../src/scopes/utilities/privacy/privacy.ts","../src/scopes/utilities/uncategorized/uncategorized.ts","../src/utils/isSSR.ts","../src/init.ts"],"sourcesContent":["class i extends Error {\n  constructor(e, r, a) {\n    super(\n      typeof r == \"object\" ? r.message : r || e,\n      {\n        cause: typeof r == \"object\" ? r.cause : a\n      }\n    ), this.type = e, Object.setPrototypeOf(this, i.prototype);\n  }\n}\nfunction b(t) {\n  return t.replace(/[A-Z]/g, (e) => `_${e.toLowerCase()}`);\n}\nfunction E(t) {\n  return t.replace(/_[a-z]/g, (e) => e[1].toUpperCase());\n}\nconst R = \"ERR_INVALID_VALUE\", S = \"ERR_UNEXPECTED_VALUE\", w = \"ERR_UNEXPECTED_TYPE\", h = \"ERR_PARSE\";\nfunction y(t, e) {\n  const r = {};\n  for (const a in t) {\n    const n = t[a];\n    if (!n)\n      continue;\n    let o, c;\n    typeof n == \"function\" ? (o = a, c = n) : [o, c] = n;\n    try {\n      const p = c(e(o));\n      p !== void 0 && (r[a] = p);\n    } catch (p) {\n      throw new i(\n        h,\n        `Parser for \"${a}\" property failed${o === a ? \"\" : `. Source field: \"${o}\"`}`,\n        p\n      );\n    }\n  }\n  return r;\n}\nfunction d(t) {\n  let e = t;\n  if (typeof e == \"string\")\n    try {\n      e = JSON.parse(e);\n    } catch (r) {\n      throw new i(R, { cause: r });\n    }\n  if (typeof e != \"object\" || !e || Array.isArray(e))\n    throw new i(S);\n  return e;\n}\nfunction s(t, e) {\n  return (r) => {\n    const a = (n) => {\n      if (!(r && n === void 0))\n        try {\n          return e(n);\n        } catch (o) {\n          throw new i(h, {\n            message: `\"${t}\" transformer failed to parse the value`,\n            cause: o\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      a,\n      {\n        isValid(n) {\n          try {\n            return a(n), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(t, e) {\n  return s(e || \"object\", (r) => {\n    const a = d(r);\n    return y(t, (n) => a[n]);\n  });\n}\nfunction f(t) {\n  throw new i(w, `Unexpected value received: ${JSON.stringify(t)}`);\n}\nconst A = s(\"boolean\", (t) => {\n  if (typeof t == \"boolean\")\n    return t;\n  const e = String(t);\n  if (e === \"1\" || e === \"true\")\n    return !0;\n  if (e === \"0\" || e === \"false\")\n    return !1;\n  f(t);\n}), u = s(\"string\", (t) => {\n  if (typeof t == \"string\" || typeof t == \"number\")\n    return t.toString();\n  f(t);\n}), g = s(\"number\", (t) => {\n  if (typeof t == \"number\")\n    return t;\n  if (typeof t == \"string\") {\n    const e = Number(t);\n    if (!Number.isNaN(e))\n      return e;\n  }\n  f(t);\n}), D = s(\"date\", (t) => t instanceof Date ? t : new Date(g()(t) * 1e3));\nfunction P(t, e) {\n  return s(e || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && f(r);\n    const a = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return y(t, (n) => {\n      const o = a.get(n);\n      return o === null ? void 0 : o;\n    });\n  });\n}\nfunction m(t) {\n  for (const e in t)\n    t[e] = [b(e), t[e]];\n  return t;\n}\nconst U = (t) => {\n  const e = g(), r = g(!0), a = u(), n = u(!0), o = A(!0), c = l(m({\n    addedToAttachmentMenu: o,\n    allowsWriteToPm: o,\n    firstName: a,\n    id: e,\n    isBot: o,\n    isPremium: o,\n    languageCode: n,\n    lastName: n,\n    photoUrl: n,\n    username: n\n  }), \"User\")(!0);\n  return P(\n    m({\n      authDate: D(),\n      canSendAfter: r,\n      chat: l(\n        m({\n          id: e,\n          type: a,\n          title: a,\n          photoUrl: n,\n          username: n\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: n,\n      chatType: n,\n      hash: a,\n      queryId: n,\n      receiver: c,\n      startParam: n,\n      user: c\n    }),\n    \"initData\"\n  )(t);\n};\nfunction N(t) {\n  return /^#[\\da-f]{6}$/i.test(t);\n}\nfunction O(t) {\n  return /^#[\\da-f]{3}$/i.test(t);\n}\nfunction W(t) {\n  const e = t.replace(/\\s/g, \"\").toLowerCase();\n  if (N(e))\n    return e;\n  if (O(e)) {\n    let a = \"#\";\n    for (let n = 0; n < 3; n += 1)\n      a += e[1 + n].repeat(2);\n    return a;\n  }\n  const r = e.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || e.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${t}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((a, n) => {\n    const o = parseInt(n, 10).toString(16);\n    return a + (o.length === 1 ? \"0\" : \"\") + o;\n  }, \"#\");\n}\nconst _ = s(\"rgb\", (t) => W(u()(t))), T = s(\n  \"themeParams\",\n  (t) => {\n    const e = _(!0);\n    return Object.entries(d(t)).reduce((r, [a, n]) => (r[E(a)] = e(n), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction V(t) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(t).map(([e, r]) => [b(e), r])\n    )\n  );\n}\nconst $ = (t) => {\n  const e = u(), r = u(!0), a = A(!0);\n  return P({\n    botInline: [\"tgWebAppBotInline\", a],\n    initData: [\"tgWebAppData\", U(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", e],\n    showSettings: [\"tgWebAppShowSettings\", a],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", T()],\n    version: [\"tgWebAppVersion\", e]\n  }, \"launchParams\")(t);\n};\n// @__NO_SIDE_EFFECTS__\nfunction j(t) {\n  const { initDataRaw: e, startParam: r, showSettings: a, botInline: n } = t, o = new URLSearchParams();\n  return o.set(\"tgWebAppPlatform\", t.platform), o.set(\"tgWebAppThemeParams\", /* @__PURE__ */ V(t.themeParams)), o.set(\"tgWebAppVersion\", t.version), e && o.set(\"tgWebAppData\", e), r && o.set(\"tgWebAppStartParam\", r), typeof a == \"boolean\" && o.set(\"tgWebAppShowSettings\", a ? \"1\" : \"0\"), typeof n == \"boolean\" && o.set(\"tgWebAppBotInline\", n ? \"1\" : \"0\"), o.toString();\n}\nconst L = l({\n  eventType: u(),\n  eventData: (t) => t\n}, \"miniAppsMessage\");\nfunction I(t, e) {\n  return s(e || \"array\", (r) => {\n    let a;\n    if (Array.isArray(r))\n      a = r;\n    else if (typeof r == \"string\")\n      try {\n        const n = JSON.parse(r);\n        Array.isArray(n) && (a = n);\n      } catch {\n      }\n    return a || f(r), a.map(t);\n  });\n}\nconst C = s(\"fn\", (t) => {\n  if (typeof t == \"function\")\n    return t;\n  f(t);\n});\nfunction B(t) {\n  return !!t && typeof t == \"object\" && !Array.isArray(t);\n}\nexport {\n  R as ERR_INVALID_VALUE,\n  h as ERR_PARSE,\n  w as ERR_UNEXPECTED_TYPE,\n  S as ERR_UNEXPECTED_VALUE,\n  I as array,\n  A as boolean,\n  s as createTransformerGen,\n  D as date,\n  C as fn,\n  U as initData,\n  N as isRGB,\n  O as isRGBShort,\n  B as isRecord,\n  $ as launchParams,\n  L as miniAppsMessage,\n  g as number,\n  l as object,\n  _ as rgb,\n  P as searchParams,\n  j as serializeLaunchParams,\n  V as serializeThemeParams,\n  u as string,\n  T as themeParams,\n  W as toRGB,\n  d as toRecord\n};\n//# sourceMappingURL=index.js.map\n","import { isRecord } from '@telegram-apps/transformers';\n\n/**\n * Function which joins passed values with space following these rules:\n * 1. If value is non-empty string, it will be added to output.\n * 2. If value is object, only those keys will be added, which values are truthy.\n * 3. If value is array, classNames will be called with this value spread.\n * 4. All other values are ignored.\n *\n * You can find this function to similar one from the package {@link https://www.npmjs.com/package/classnames|classnames}.\n * @param values - values array.\n * @returns Final class name.\n */\nexport function classNames(...values: any[]): string {\n  return values\n    .map((value) => {\n      if (typeof value === 'string') {\n        return value;\n      }\n\n      if (isRecord(value)) {\n        return classNames(Object.entries(value).map((entry) => entry[1] && entry[0]));\n      }\n\n      if (Array.isArray(value)) {\n        return classNames(...value);\n      }\n    })\n    .filter(Boolean)\n    .join(' ');\n}\n","import { isRecord } from '@telegram-apps/transformers';\n\nimport { classNames } from './classNames.js';\n\ntype UnionStringKeys<U> = U extends U\n  ? { [K in keyof U]-?: U[K] extends string | undefined ? K : never }[keyof U]\n  : never;\n\ntype UnionRequiredKeys<U> = U extends U\n  ? { [K in UnionStringKeys<U>]: ({} extends Pick<U, K> ? never : K) }[UnionStringKeys<U>]\n  : never;\n\ntype UnionOptionalKeys<U> = Exclude<UnionStringKeys<U>, UnionRequiredKeys<U>>;\n\nexport type MergeClassNames<Tuple extends any[]> =\n// Removes all types from union that will be ignored by the mergeClassNames function.\n  Exclude<Tuple[number], number | string | null | undefined | any[] | boolean> extends infer Union\n    ?\n    & { [K in UnionRequiredKeys<Union>]: string; }\n    & { [K in UnionOptionalKeys<Union>]?: string; }\n    : never;\n\n/**\n * Merges two sets of classnames.\n *\n * The function expects to pass an array of objects with values that could be passed to\n * the `classNames` function.\n * @returns An object with keys from all objects with merged values.\n * @see classNames\n */\nexport function mergeClassNames<T extends any[]>(...partials: T): MergeClassNames<T> {\n  return partials.reduce<MergeClassNames<T>>((acc, partial) => {\n    if (isRecord(partial)) {\n      Object.entries(partial).forEach(([key, value]) => {\n        const className = classNames((acc as any)[key], value);\n        if (className) {\n          (acc as any)[key] = className;\n        }\n      });\n    }\n    return acc;\n  }, {} as MergeClassNames<T>);\n}\n","let v = class H extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, H.prototype);\n  }\n};\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", de = \"ERR_UNEXPECTED_VALUE\", me = \"ERR_UNEXPECTED_TYPE\", V = \"ERR_PARSE\";\nfunction K(e, t) {\n  const n = {};\n  for (const r in e) {\n    const o = e[r];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = r, a = o) : [s, a] = o;\n    try {\n      const i = a(t(s));\n      i !== void 0 && (n[r] = i);\n    } catch (i) {\n      throw new v(\n        V,\n        `Parser for \"${r}\" property failed${s === r ? \"\" : `. Source field: \"${s}\"`}`,\n        i\n      );\n    }\n  }\n  return n;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (n) {\n      throw new v(he, { cause: n });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new v(de);\n  return t;\n}\nfunction g(e, t) {\n  return (n) => {\n    const r = (o) => {\n      if (!(n && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new v(V, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      r,\n      {\n        isValid(o) {\n          try {\n            return r(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction _(e, t) {\n  return g(t || \"object\", (n) => {\n    const r = Z(n);\n    return K(e, (o) => r[o]);\n  });\n}\nfunction R(e) {\n  throw new v(me, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), l = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (n) => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && R(n);\n    const r = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return K(e, (o) => {\n      const s = r.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction U(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), n = P(!0), r = l(), o = l(!0), s = $(!0), a = _(U({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: r,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    U({\n      authDate: Ee(),\n      canSendAfter: n,\n      chat: _(\n        U({\n          id: t,\n          type: r,\n          title: r,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: r,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let r = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      r += t[1 + o].repeat(2);\n    return r;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((r, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return r + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(l()(e))), Se = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((n, [r, o]) => (n[we(r)] = t(o), n), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction X(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, n]) => [G(t), n])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = l(), n = l(!0), r = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", r],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", r],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", Se()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction $e(e) {\n  const { initDataRaw: t, startParam: n, showSettings: r, botInline: o } = e, s = new URLSearchParams();\n  return s.set(\"tgWebAppPlatform\", e.platform), s.set(\"tgWebAppThemeParams\", /* @__PURE__ */ X(e.themeParams)), s.set(\"tgWebAppVersion\", e.version), t && s.set(\"tgWebAppData\", t), n && s.set(\"tgWebAppStartParam\", n), typeof r == \"boolean\" && s.set(\"tgWebAppShowSettings\", r ? \"1\" : \"0\"), typeof o == \"boolean\" && s.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), s.toString();\n}\nconst Y = _({\n  eventType: l(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Q = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction Ne(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = _({\n  TelegramWebviewProxy: _({ postEvent: Q() })()\n});\nfunction ee(e) {\n  return Ce().isValid(e);\n}\nfunction De() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar Ue = Object.defineProperty, je = (e, t, n) => t in e ? Ue(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, te = (e, t, n) => je(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nclass b extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction x(e, t, n) {\n  return e.addEventListener(t, n), () => e.removeEventListener(t, n);\n}\nfunction L(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((n) => {\n        n();\n      });\n    }\n  ];\n}\nfunction xe(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction O(e) {\n  return (t) => xe(t, e);\n}\nconst ne = \"ERR_ABORTED\", re = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(ne, { cause: e });\n}\nconst ot = O(oe), st = O(ne), at = O(re);\nfunction q(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s, a;\n    super((i, c) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return c(M(u.reason));\n      const [f, h] = L(), d = (m) => (...ge) => (h(), m(...ge)), T = new AbortController(), { signal: S } = T;\n      a = d((m) => {\n        T.abort(m), c(m);\n      }), s = d(i), u && f(\n        x(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const m = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(m);\n        });\n      }\n      r && r(s, a, S);\n    }), te(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new w((r, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(r, o) : r(a);\n      } catch (a) {\n        o(a);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(re));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return q(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return q(super.then(t, n), this);\n  }\n}\nfunction F(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass A extends w {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s;\n    super((a, i, c) => {\n      s = a, r && r(a, i, c);\n    }, o), te(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new A(\n      (r, o, s) => w.withFn(t, { abortSignal: s }).then(r, o),\n      n\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new A((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new A((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return F(super.then(t, n), this);\n  }\n}\nfunction it(e, t) {\n  return new w((n) => {\n    setTimeout(n, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction ke(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction Le(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction pt(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction Oe(e, t) {\n  t || (t = {});\n  const {\n    textColor: n,\n    bgColor: r,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...i) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const c = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${c};background-color: lightblue;color:black`,\n      \"\",\n      `${c};${n ? `color:${n};` : \"\"}${r ? `background-color:${r}` : \"\"}`,\n      ...i\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction ft(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction lt(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction We(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction E(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let r = [], o = e;\n  const s = (u) => {\n    if (!n(o, u)) {\n      const f = o;\n      o = u, We(c, () => {\n        [...r].forEach(([h, d]) => {\n          h(u, f), d && i(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const i = (u, f) => {\n    const h = a(f), d = r.findIndex(([T, S]) => T === u && S.once === h.once && S.signal === h.signal);\n    d >= 0 && r.splice(d, 1);\n  }, c = Object.assign(\n    function() {\n      return Ie(c), o;\n    },\n    {\n      destroy() {\n        r = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return r.push([u, a(f)]), () => i(u, f);\n      },\n      unsub: i,\n      unsubAll() {\n        r = r.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return c;\n}\nconst j = [];\nfunction Ie(e) {\n  j.length && j[j.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ E(!1), [W, Me] = /* @__PURE__ */ Oe(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), qe = {\n  clipboard_text_received: _({\n    req_id: l(),\n    data: (e) => e === null ? e : l(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: _({\n    req_id: l(),\n    result: (e) => e,\n    error: l(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? _({\n    button_id: (t) => t == null ? void 0 : l()(t)\n  })()(e) : {}),\n  viewport_changed: _({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Fe(e) {\n  const t = window, [, n] = L(\n    // Add \"resize\" event listener to make sure, we always have fresh viewport information.\n    // The desktop version of Telegram is sometimes not sending the \"viewport_changed\"\n    // event. For example, when the Main Button is shown. That's why we should\n    // add our own listener to make sure viewport information is always fresh.\n    // Issue: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/10\n    x(t, \"resize\", () => {\n      e([\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      }]);\n    }),\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    x(t, \"message\", (r) => {\n      if (r.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = Y()(r.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, i = qe[s];\n      try {\n        const c = i ? i()(a) : a;\n        W(\"Event received:\", c ? { eventType: s, eventData: c } : { eventType: s }), e([s, c]);\n      } catch (c) {\n        Me(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          c\n        );\n      }\n    })\n  );\n  return n;\n}\nconst N = /* @__PURE__ */ E(), C = /* @__PURE__ */ E();\nfunction ie() {\n  return C() || C.set(Fe(N.set)), N;\n}\nconst y = /* @__PURE__ */ E({});\nfunction ce(e) {\n  let t = y()[e];\n  return t || (t = /* @__PURE__ */ E(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ie().sub((n) => {\n    n && n[0] === e && t.set(n[1]);\n  }), y.set({ ...y(), [e]: t })), t;\n}\nfunction Je(e, t, n) {\n  return ce(e).sub(t, n);\n}\nconst Be = \"ERR_METHOD_UNSUPPORTED\", He = \"ERR_RETRIEVE_LP_FAILED\", Ge = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ve = \"ERR_UNKNOWN_ENV\", Ke = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ E(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  W(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const n = window;\n  if (ee(n)) {\n    n.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const r = JSON.stringify({ eventType: e, eventData: t });\n  if (De())\n    return n.parent.postMessage(r, ue());\n  const { external: o } = n;\n  if (_({ notify: Q() })().isValid(o)) {\n    o.notify(r);\n    return;\n  }\n  throw new b(Ve);\n}\nfunction fe(e, t, n) {\n  n || (n = {});\n  const { capture: r } = n, [o, s] = L();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((i) => {\n      o(\n        Je(i, (c) => {\n          (!r || (Array.isArray(t) ? r({\n            event: i,\n            payload: c\n          }) : r(c))) && a(c);\n        })\n      );\n    }), (n.postEvent || pe)(e, n.params);\n  }, n).finally(s);\n}\nfunction I(e) {\n  return Ae()(e);\n}\nfunction le(e) {\n  return I(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ze() {\n  return le(window.location.href);\n}\nfunction ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return le(e.name);\n}\nconst Xe = \"launchParams\";\nfunction Ye() {\n  return I(Le(Xe) || \"\");\n}\nfunction _e(e) {\n  ke(\"launchParams\", /* @__PURE__ */ $e(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Qe() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ze,\n    // Then, try using the lower level API - window.performance.\n    ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Ye\n  ])\n    try {\n      const n = t();\n      return _e(n), n;\n    } catch (n) {\n      e.push(n);\n    }\n  throw new b(He, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"📖 Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `— ${be(t)}`)\n  ].join(`\n`));\n}\nfunction _t(e) {\n  if (e === \"simple\")\n    try {\n      return Qe(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (ee(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction k(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction et(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: n } = Y()(t);\n      n === \"web_app_request_theme\" && k(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ X(e))\n      }), n === \"web_app_request_viewport\" && k(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction bt(e) {\n  var r;\n  const t = typeof e == \"string\" ? I(e) : e;\n  _e(t);\n  const n = (r = window.TelegramWebviewProxy) == null ? void 0 : r.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      et(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), n == null || n(o, s);\n    }\n  }, W(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction gt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((n, r, o) => {\n      if (r === o.length - 1) {\n        t[n] = k;\n        return;\n      }\n      n in t || (t[n] = {}), t = t[n];\n    });\n  });\n}\nfunction wt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction ht(e, t, n) {\n  ce(e).unsub(t, n);\n}\nfunction dt(e, t) {\n  return ie().sub(e, t);\n}\nfunction mt(e, t) {\n  N.unsub(e, t);\n}\nfunction tt(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction J(e) {\n  return e.split(\".\").map(Number);\n}\nfunction nt(e, t) {\n  const n = J(e), r = J(t), o = Math.max(n.length, r.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = n[s] || 0, i = r[s] || 0;\n    if (a !== i)\n      return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return nt(e, t) <= 0;\n}\nfunction B(e, t, n) {\n  if (typeof n == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", n);\n      if (t === \"try_browser\")\n        return p(\"7.6\", n);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", n);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", n);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", n);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction Et(e, t) {\n  t || (t = \"strict\");\n  const n = typeof t == \"function\" ? t : (r) => {\n    const { method: o, version: s } = r;\n    let a, i;\n    if (\"param\" in r ? (a = `Parameter \"${r.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, i = Ge) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, i = Be), t === \"strict\")\n      throw new b(i, a);\n    return console.warn(a);\n  };\n  return (r, o) => B(r, e) ? Ne(o) && r === \"web_app_set_header_color\" && \"color\" in o && !B(r, \"color\", e) ? n({ version: e, method: r, param: \"color\" }) : pe(r, o) : n({ version: e, method: r });\n}\nfunction yt(e, t, n, r) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...r || {},\n    params: { method: e, params: t, req_id: n },\n    capture: tt(n)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ke, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction vt() {\n  var e;\n  (e = C()) == null || e(), [\n    ...Object.values(y()),\n    y,\n    N,\n    C,\n    ue,\n    ae\n  ].forEach(rt);\n}\nexport {\n  ae as $debug,\n  ue as $targetOrigin,\n  w as CancelablePromise,\n  ne as ERR_ABORTED,\n  re as ERR_CANCELED,\n  Ke as ERR_CUSTOM_METHOD_ERR_RESPONSE,\n  Ge as ERR_METHOD_PARAMETER_UNSUPPORTED,\n  Be as ERR_METHOD_UNSUPPORTED,\n  He as ERR_RETRIEVE_LP_FAILED,\n  oe as ERR_TIMED_OUT,\n  Ve as ERR_UNKNOWN_ENV,\n  A as EnhancedPromise,\n  b as TypedError,\n  x as addEventListener,\n  ct as camelToKebab,\n  ut as camelToSnake,\n  tt as captureSameReq,\n  nt as compareVersions,\n  M as createAbortError,\n  L as createCbCollector,\n  Oe as createLogger,\n  Et as createPostEvent,\n  O as createTypedErrorPredicate,\n  gt as defineEventHandlers,\n  lt as deleteCssVar,\n  k as emitMiniAppsEvent,\n  Le as getStorageValue,\n  ee as hasWebviewProxy,\n  yt as invokeCustomMethod,\n  st as isAbortError,\n  at as isCanceledError,\n  De as isIframe,\n  _t as isTMA,\n  ot as isTimeoutError,\n  bt as mockTelegramEnv,\n  ht as off,\n  Je as on,\n  pe as postEvent,\n  wt as removeEventHandlers,\n  fe as request,\n  vt as resetPackageState,\n  Qe as retrieveLaunchParams,\n  ft as setCssVar,\n  ke as setStorageValue,\n  it as sleep,\n  pt as snakeToCamel,\n  dt as subscribe,\n  B as supports,\n  mt as unsubscribe\n};\n//# sourceMappingURL=index.js.map\n","function i() {\n  return performance.getEntriesByType(\"navigation\")[0];\n}\nfunction c() {\n  const t = i();\n  return !!t && t.type === \"reload\";\n}\nfunction o(t, n) {\n  return t.startsWith(n) ? t : `${n}${t}`;\n}\nfunction R(t) {\n  return new URL(\n    typeof t == \"string\" ? t : [\n      t.pathname || \"\",\n      o(t.search || \"\", \"?\"),\n      o(t.hash || \"\", \"#\")\n    ].join(\"\"),\n    \"http://a\"\n  );\n}\nfunction a(t) {\n  const n = (typeof t == \"string\" ? t : t.pathname || \"\").startsWith(\"/\"), e = R(t), { pathname: s } = e;\n  return `${n ? s : s.slice(1)}${e.search}${e.hash}`;\n}\nconst r = \"ERR_NAVIGATION_HISTORY_EMPTY\", I = \"ERR_NAVIGATION_CURSOR_INVALID\";\nexport {\n  I as ERR_CURSOR_INVALID,\n  r as ERR_HISTORY_EMPTY,\n  R as createSafeURL,\n  o as ensurePrefix,\n  i as getFirstNavigationEntry,\n  c as isPageReload,\n  a as urlToPath\n};\n//# sourceMappingURL=index.js.map\n","let i;\nfunction y(e, s) {\n  i && i.set(e, s) || s();\n}\nfunction m(e) {\n  if (i)\n    return e();\n  i = /* @__PURE__ */ new Map();\n  try {\n    e();\n  } finally {\n    i.forEach((s) => s()), i = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction S(e, s) {\n  s || (s = {});\n  const d = s.equals || Object.is;\n  let n = [], c = e;\n  const a = (t) => {\n    if (!d(c, t)) {\n      const u = c;\n      c = t, y(l, () => {\n        [...n].forEach(([f, g]) => {\n          f(t, u), g && r(f, !0);\n        });\n      });\n    }\n  };\n  function o(t) {\n    const u = typeof t != \"object\" ? { once: t } : t;\n    return {\n      once: u.once || !1,\n      signal: u.signal || !1\n    };\n  }\n  const r = (t, u) => {\n    const f = o(u), g = n.findIndex(([h, p]) => h === t && p.once === f.once && p.signal === f.signal);\n    g >= 0 && n.splice(g, 1);\n  }, l = Object.assign(\n    function() {\n      return j(l), c;\n    },\n    {\n      destroy() {\n        n = [];\n      },\n      set: a,\n      reset() {\n        a(e);\n      },\n      sub(t, u) {\n        return n.push([t, o(u)]), () => r(t, u);\n      },\n      unsub: r,\n      unsubAll() {\n        n = n.filter((t) => t[1].signal);\n      }\n    }\n  );\n  return l;\n}\nconst b = [];\nfunction j(e) {\n  b.length && b[b.length - 1].add(e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction x(e, s) {\n  let d = /* @__PURE__ */ new Set();\n  const n = /* @__PURE__ */ S(a(), s);\n  function c() {\n    n.set(a());\n  }\n  function a() {\n    d.forEach((l) => l.unsub(c, { signal: !0 }));\n    const o = /* @__PURE__ */ new Set();\n    let r;\n    b.push(o);\n    try {\n      r = e();\n    } finally {\n      b.pop();\n    }\n    return o.forEach((l) => {\n      l.sub(c, { signal: !0 });\n    }), d = o, r;\n  }\n  return Object.assign(function() {\n    return n();\n  }, {\n    destroy: n.destroy,\n    sub: n.sub,\n    unsub: n.unsub,\n    unsubAll: n.unsubAll\n  });\n}\nexport {\n  m as batch,\n  x as computed,\n  S as signal\n};\n//# sourceMappingURL=index.js.map\n","import {\n  retrieveLaunchParams,\n  postEvent as _postEvent,\n  request as _request,\n  invokeCustomMethod as _invokeCustomMethod,\n  createPostEvent,\n  type PostEventFn,\n  type Version,\n  type CreatePostEventMode,\n  type RequestFn,\n  type CancelablePromise,\n  type ExecuteWithOptions,\n  type CustomMethodParams,\n  type CustomMethodName,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nexport interface ConfigureOptions {\n  /**\n   * A maximum supported Mini Apps version.\n   * @default Being extracted using the `retrieveLaunchParams` function.\n   * @see retrieveLaunchParams\n   */\n  version?: Version;\n  /**\n   * Custom postEvent function.\n   *\n   * Passing the \"strict\" value creates a function, which always checks if specified call supported\n   * by currently supported Mini Apps version. If the method is unsupported, an error will be\n   * thrown.\n   *\n   * Passing the \"non-strict\" value creates a postEvent function not throwing any errors, but\n   * warning about a missing method support.\n   *\n   * @default 'strict'\n   * @see createPostEvent\n   */\n  postEvent?: PostEventFn | CreatePostEventMode;\n}\n\n/**\n * Signal with a request identifier generator. Usually, you don't need to set this value manually.\n */\nexport const $createRequestId = signal((() => {\n  let requestId = 0;\n  return () => (requestId += 1).toString();\n})());\n\n/**\n * Signal with a currently used postEvent function across the package.\n */\nexport const $postEvent = signal<PostEventFn>(_postEvent);\n\n/**\n * Signal with a currently supported maximum Mini Apps version. This value is usually set via\n */\nexport const $version = signal<Version>('0.0');\n\n/**\n * Configures package global dependencies.\n * @param options - configuration additional options.\n */\nexport function configure(options?: ConfigureOptions): void {\n  options ||= {};\n  const { postEvent: optionsPostEvent } = options;\n  const v = options.version || retrieveLaunchParams().version;\n  $version.set(v);\n  $postEvent.set(\n    typeof optionsPostEvent === 'function'\n      ? optionsPostEvent\n      : createPostEvent(v, optionsPostEvent),\n  );\n}\n\n/**\n * Creates a new request id.\n */\nexport function createRequestId(): string {\n  return $createRequestId()();\n}\n\n/**\n * Invokes known custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport function invokeCustomMethod<M extends CustomMethodName>(\n  method: M,\n  params: CustomMethodParams<M>,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown>;\n\n/**\n * Invokes unknown custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown>;\n\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown> {\n  return _invokeCustomMethod(method, params, createRequestId(), {\n    ...options || {},\n    postEvent: postEvent,\n  });\n}\n\n/**\n * `request` function from the bridge with applied global `postEvent` option.\n */\nexport const request = ((method: any, eventOrEvents: any, options: any) => {\n  options ||= {};\n  options.postEvent ||= postEvent;\n  return _request(method, eventOrEvents, options);\n}) as RequestFn;\n\n/**\n * Shortcut for $postEvent call.\n */\nexport const postEvent = ((method: any, params: any) => {\n  return $postEvent()(method, params);\n}) as PostEventFn;\n","import type { Signal } from '@telegram-apps/signals';\n\n/**\n * Calls the function and subscribes it to the specified signal.\n *\n * We usually use this function in components' mount methods when we need not only to add\n * a signal change listener, but also call it. For example, to post the actual component state\n * to the Telegram application.\n * @param signal - signal to add change listener to.\n * @param fn - listener to add and call.\n */\nexport function subAndCall<T>(signal: Pick<Signal<T>, 'sub'>, fn: () => void) {\n  fn();\n  signal.sub(fn);\n}","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  supports,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\nimport { signal } from '@telegram-apps/signals';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\n\n\ntype StorageValue = boolean;\n\nconst MINI_APPS_METHOD = 'web_app_setup_back_button';\nconst CLICK_EVENT = 'back_button_pressed';\nconst STORAGE_KEY = 'backButton';\n\n/**\n * Hides the back button.\n */\nexport function hide(): void {\n  isVisible.set(false)\n}\n\n/**\n * @returns True if the back button is supported.\n */\nexport function isSupported(): boolean {\n  return supports(MINI_APPS_METHOD, $version());\n}\n\n/**\n * True if the component is currently visible.\n */\nexport const isVisible = signal(false);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    isVisible.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || false);\n    subAndCall(isVisible, onStateChanged);\n    isMounted.set(true);\n  }\n}\n\nfunction onStateChanged(): void {\n  const value = isVisible();\n  postEvent(MINI_APPS_METHOD, { is_visible: value });\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n}\n\n/**\n * Add a new back button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n */\nexport function onClick(fn: EventListener<'back_button_pressed'>): VoidFunction {\n  return on(CLICK_EVENT, fn);\n}\n\n/**\n * Removes the back button click listener.\n * @param fn - an event listener.\n */\nexport function offClick(fn: EventListener<'back_button_pressed'>): void {\n  off(CLICK_EVENT, fn);\n}\n\n/**\n * Shows the back button.\n */\nexport function show(): void {\n  isVisible.set(true)\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n *\n * Note that this function does not remove listeners, added via the `onClick` function.\n * @see onClick\n */\nexport function unmount(): void {\n  isVisible.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","export const ERR_POPUP_INVALID_PARAMS = 'ERR_POPUP_INVALID_PARAMS';\nexport const ERR_INVALID_HOSTNAME = 'ERR_INVALID_HOSTNAME';\nexport const ERR_INVALID_SLUG = 'ERR_INVALID_SLUG';\nexport const ERR_DATA_INVALID_SIZE = 'ERR_DATA_INVALID_SIZE';\nexport const ERR_ACCESS_DENIED = 'ERR_ACCESS_DENIED';\nexport const ERR_ALREADY_CALLED = 'ERR_ALREADY_CALLED';\nexport const ERR_NOT_AVAILABLE = 'ERR_NOT_AVAILABLE';\n","import { batch, type Signal } from '@telegram-apps/signals';\nimport { type AsyncOptions, CancelablePromise, TypedError } from '@telegram-apps/bridge';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\n\n/**\n * Creates a mount function for a component.\n * @param mount - function mounting the component.\n * @param onMounted - callback which will be called with the mount result.\n * @param mountPromise - signal containing mount promise.\n * @param isMounted - signal containing mount state.\n * @param mountError - signal containing mount error.\n */\n// #__NO_SIDE_EFFECTS__\nexport function createMountFn<T = void>(\n  mount: (options: AsyncOptions) => (T | CancelablePromise<T>),\n  onMounted: (result: T) => void,\n  {\n    isMounting,\n    isMounted,\n    mountError,\n  }: {\n    isMounted: Signal<boolean>,\n    isMounting: Signal<boolean>,\n    mountError: Signal<Error | undefined>,\n  },\n): (options?: AsyncOptions) => CancelablePromise<void> {\n  return function mountFn(mountOptions) {\n    if (isMounted()) {\n      return CancelablePromise.resolve();\n    }\n\n    if (isMounting()) {\n      throw new TypedError(ERR_ALREADY_CALLED);\n    }\n    isMounting.set(true);\n\n    return CancelablePromise\n      .withFn((abortSignal) => mount({ abortSignal }), mountOptions)\n      .then<[true, T], [false, Error]>(\n        r => [true, r],\n        e => [false, e],\n      )\n      .then(tuple => {\n        batch(() => {\n          isMounting.set(false);\n          isMounted.set(true);\n\n          if (tuple[0]) {\n            onMounted(tuple[1]);\n          } else {\n            const error = tuple[1];\n            mountError.set(error);\n            throw error;\n          }\n        });\n      });\n  };\n}","import { signal } from '@telegram-apps/signals';\n\nimport type { State } from './types.js';\n\n/**\n * Complete biometry manager state.\n */\nexport const state = signal<State | undefined>();\n\n/**\n * True if the manager is currently authenticating.\n */\nexport const isAuthenticating = signal<boolean>(false);\n\n/**\n * True if the manager is currently requesting access.\n */\nexport const isRequestingAccess = signal<boolean>(false);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if the component is currently mounting.\n */\nexport const isMounting = signal<boolean>(false);\n\n/**\n * Error occurred while mounting the component.\n */\nexport const mountError = signal<Error | undefined>(undefined);\n","import { type MethodName, supports } from '@telegram-apps/bridge';\n\nimport { $version } from '@/scopes/globals.js';\n\nexport type WithIsSupported<F extends (...args: any) => any> = F & {\n  /**\n   * @returns True, if this function is supported.\n   */\n  isSupported(): boolean;\n};\n\n/**\n * Adds the \"isSupported\" method to the passed function returning true, if the current Mini Apps\n * version supports passed Mini Apps method.\n * @param fn - function to extend.\n * @param miniAppsMethod - Mini Apps method.\n * @param additionalCheck - additional function to be called along with method support.\n */\n\n/*@__NO_SIDE_EFFECTS__*/\nexport function withIsSupported<F extends (...args: any) => any>(\n  fn: F,\n  method: MethodName,\n  additionalCheck?: () => boolean,\n): WithIsSupported<F> {\n  return Object.assign(fn, {\n    isSupported() {\n      return supports(method, $version()) && (!additionalCheck || additionalCheck());\n    },\n  });\n}\n","import type { EventPayload } from '@telegram-apps/bridge';\n\nimport type { State } from './types.js';\n\n/**\n * Converts `biometry_info_received` to some common shape.\n * @param event - event payload.\n * @see biometry_info_received\n */\nexport function eventToState(event: EventPayload<'biometry_info_received'>): State {\n  return event.available ? {\n    available: true,\n    tokenSaved: event.token_saved,\n    deviceId: event.device_id,\n    accessRequested: event.access_requested,\n    type: event.type,\n    accessGranted: event.access_granted,\n  } : {\n    available: false,\n  };\n}\n","import type { ExecuteWithOptions, CancelablePromise } from '@telegram-apps/bridge';\n\nimport { request } from '@/scopes/globals.js';\nimport { withIsSupported } from '@/scopes/withIsSupported.js';\n\nimport { eventToState } from './eventToState.js';\nimport type { State } from './types.js';\n\nconst GET_INFO_METHOD = 'web_app_biometry_get_info';\n\n/**\n * Requests biometry information.\n * @param options - additional execution options.\n */\nexport const requestBiometry = withIsSupported(\n  (options?: ExecuteWithOptions): CancelablePromise<State> => {\n    return request(GET_INFO_METHOD, 'biometry_info_received', options).then(eventToState);\n  }, GET_INFO_METHOD,\n);\n","import {\n  supports,\n  on,\n  off,\n  TypedError,\n  CancelablePromise,\n  getStorageValue,\n  setStorageValue,\n  type BiometryTokenUpdateStatus,\n  type BiometryAuthRequestStatus,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { $version, postEvent, request } from '@/scopes/globals.js';\nimport { createMountFn } from '@/scopes/createMountFn.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { ERR_ALREADY_CALLED, ERR_NOT_AVAILABLE } from '@/errors.js';\n\nimport {\n  state,\n  mountError,\n  isMounted,\n  isRequestingAccess,\n  isAuthenticating,\n  isMounting,\n} from './signals.js';\nimport { requestBiometry } from './requestBiometry.js';\nimport { eventToState } from './eventToState.js';\nimport type {\n  State,\n  AuthenticateOptions,\n  RequestAccessOptions,\n  UpdateTokenOptions,\n} from './types.js';\n\ntype StorageValue = State;\n\nconst REQUEST_AUTH_METHOD = 'web_app_biometry_request_auth';\nconst REQUEST_ACCESS_METHOD = 'web_app_biometry_request_access';\nconst OPEN_SETTINGS_METHOD = 'web_app_biometry_open_settings';\nconst UPDATE_TOKEN_METHOD = 'web_app_biometry_update_token';\nconst BIOMETRY_INFO_RECEIVED_EVENT = 'biometry_info_received';\nconst STORAGE_KEY = 'biometry';\n\n/**\n * Attempts to authenticate a user using biometrics and fetch a previously stored\n * secure token.\n * @param options - method options.\n * @since 7.2\n * @returns Token from the local secure storage saved previously or undefined.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_AVAILABLE\n */\nexport function authenticate(options?: AuthenticateOptions): CancelablePromise<{\n  /**\n   * Authentication status.\n   */\n  status: BiometryAuthRequestStatus;\n  /**\n   * Token from the local secure storage saved previously.\n   */\n  token?: string;\n}> {\n  if (isAuthenticating()) {\n    return CancelablePromise.reject(new TypedError(ERR_ALREADY_CALLED));\n  }\n\n  const s = state();\n  if (!s || !s.available) {\n    return CancelablePromise.reject(new TypedError(ERR_NOT_AVAILABLE));\n  }\n\n  isAuthenticating.set(true);\n\n  options ||= {};\n  return request(REQUEST_AUTH_METHOD, 'biometry_auth_requested', {\n    ...options,\n    params: { reason: (options.reason || '').trim() },\n  })\n    .then(response => {\n      const { token } = response;\n      if (typeof token === 'string') {\n        state.set({ ...s, token });\n      }\n      return response;\n    })\n    .finally(() => {\n      isAuthenticating.set(false);\n    });\n}\n\n/**\n * @returns True if the biometry manager is supported.\n */\nexport function isSupported(): boolean {\n  return supports(REQUEST_AUTH_METHOD, $version());\n}\n\n/**\n * Opens the biometric access settings for bots. Useful when you need to request biometrics\n * access to users who haven't granted it yet.\n *\n * _Note that this method can be called only in response to user interaction with the Mini App\n * interface (e.g. a click inside the Mini App or on the main button)_.\n * @since 7.2\n */\nexport function openSettings(): void {\n  postEvent(OPEN_SETTINGS_METHOD);\n}\n\n/**\n * Requests permission to use biometrics.\n * @since 7.2\n * @returns Promise with true, if access was granted.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_AVAILABLE\n */\nexport function requestAccess(options?: RequestAccessOptions): CancelablePromise<boolean> {\n  if (isRequestingAccess()) {\n    return CancelablePromise.reject(new TypedError(ERR_ALREADY_CALLED));\n  }\n  isRequestingAccess.set(true);\n\n  options ||= {};\n  return request(REQUEST_ACCESS_METHOD, BIOMETRY_INFO_RECEIVED_EVENT, {\n    ...options,\n    params: { reason: options.reason || '' },\n  })\n    .then(eventToState)\n    .then((info) => {\n      if (!info.available) {\n        throw new TypedError(ERR_NOT_AVAILABLE);\n      }\n      state.set(info);\n      return info.accessGranted;\n    })\n    .finally(() => {\n      isRequestingAccess.set(false);\n    });\n}\n\n/**\n * Mounts the component.\n * @throws {TypedError} ERR_ALREADY_CALLED\n */\nexport const mount = createMountFn<State>(\n  (options) => {\n    // May be not supported.\n    if (!isSupported()) {\n      return { available: false };\n    }\n\n    // Try to restore the state using the storage.\n    const s = isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY);\n    if (s) {\n      return s;\n    }\n\n    // We were unable to retrieve data locally. In this case, we are sending a request returning\n    // the biometry information.\n    return requestBiometry(options);\n  },\n  result => {\n    on(BIOMETRY_INFO_RECEIVED_EVENT, onBiometryInfoReceived);\n    subAndCall(state, onStateChanged);\n    state.set(result);\n  },\n  { isMounted, mountError, isMounting },\n);\n\nconst onBiometryInfoReceived: EventListener<'biometry_info_received'> = e => {\n  state.set(eventToState(e));\n};\n\nfunction onStateChanged(): void {\n  const s = state();\n  s && setStorageValue<StorageValue>(STORAGE_KEY, s);\n}\n\n/**\n * Unmounts the component.\n */\nexport function unmount(): void {\n  off(BIOMETRY_INFO_RECEIVED_EVENT, onBiometryInfoReceived);\n  state.unsub(onStateChanged);\n}\n\n/**\n * Updates the biometric token in a secure storage on the device.\n * @since 7.2\n * @returns Promise with `true`, if token was updated.\n */\nexport function updateToken(options?: UpdateTokenOptions): CancelablePromise<BiometryTokenUpdateStatus> {\n  options ||= {};\n  return request(UPDATE_TOKEN_METHOD, 'biometry_token_updated', {\n    ...options,\n    params: {\n      token: options.token || '',\n      reason: options.reason,\n    },\n  }).then(r => r.status);\n}\n","import { isPageReload } from '@telegram-apps/navigation';\nimport { getStorageValue, setStorageValue } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\n\ntype StorageValue = boolean;\n\nconst STORAGE_KEY = 'closingConfirmation';\n\n/**\n * Disables the confirmation dialog when closing the Mini App.\n */\nexport function disableConfirmation(): void {\n  isConfirmationEnabled.set(false);\n}\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if the confirmation dialog should be shown while the user is trying to close the Mini App.\n */\nexport const isConfirmationEnabled = signal(false);\n\n/**\n * Enables the confirmation dialog when closing the Mini App.\n */\nexport function enableConfirmation(): void {\n  isConfirmationEnabled.set(true);\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    isConfirmationEnabled.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || false);\n    subAndCall(isConfirmationEnabled, onStateChanged);\n    isMounted.set(true);\n  }\n}\n\nfunction onStateChanged(): void {\n  const value = isConfirmationEnabled();\n  postEvent('web_app_setup_closing_behavior', { need_confirmation: value });\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  isConfirmationEnabled.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import { CancelablePromise, type ExecuteWithOptions, supports } from '@telegram-apps/bridge';\nimport { array, object, string } from '@telegram-apps/transformers';\n\nimport { $version, invokeCustomMethod } from '@/scopes/globals.js';\n\nconst MINI_APPS_METHOD = 'web_app_invoke_custom_method';\n\n/**\n * Deletes specified key or keys from the cloud storage.\n * @param keyOrKeys - key or keys to delete.\n * @param options - request execution options.\n */\nexport function deleteItem(\n  keyOrKeys: string | string[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<void> {\n  const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n  return keys.length\n    ? invokeCustomMethod('deleteStorageValues', { keys }, options).then()\n    : CancelablePromise.resolve();\n}\n\n/**\n * @param keys - keys list.\n * @param options - request execution options.\n * @returns Map, where a key is one of the specified in the `keys` argument, and a value is\n * a corresponding storage value.\n */\nexport function getItem<K extends string>(\n  keys: K[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<Record<K, string>>;\n\n/**\n * @param key - cloud storage key.\n * @param options - request execution options.\n * @return Value of the specified key. If the key was not created previously, the function\n * will return an empty string.\n */\nexport function getItem(key: string, options?: ExecuteWithOptions): CancelablePromise<string>;\n\nexport function getItem(\n  keyOrKeys: string | string[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<string | Record<string, string>> {\n  const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n\n  return keys.length\n    ? invokeCustomMethod('getStorageValues', { keys }, options).then(data => {\n      const result = object(\n        Object.fromEntries(keys.map((k) => [k, string()])),\n      )()(data);\n\n      return Array.isArray(keyOrKeys) ? result : result[keyOrKeys];\n    })\n    : CancelablePromise.resolve(typeof keyOrKeys === 'string' ? '' : {});\n}\n\n/**\n * Returns a list of all keys presented in the cloud storage.\n * @param options - request execution options.\n */\nexport function getKeys(options?: ExecuteWithOptions): CancelablePromise<string[]> {\n  return invokeCustomMethod('getStorageKeys', {}, options).then(array(string())());\n}\n\n/**\n * @returns True if the cloud storage is supported.\n */\nexport function isSupported(): boolean {\n  return supports(MINI_APPS_METHOD, $version());\n}\n\n/**\n * Saves specified value by key.\n * @param key - storage key.\n * @param value - storage value.\n * @param options - request execution options.\n */\nexport function setItem(\n  key: string,\n  value: string,\n  options?: ExecuteWithOptions,\n): CancelablePromise<void> {\n  return invokeCustomMethod('saveStorageValue', { key, value }, options).then();\n}\n","import {\n  supports,\n  type ImpactHapticFeedbackStyle,\n  type NotificationHapticFeedbackType,\n} from '@telegram-apps/bridge';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\n\nconst MINI_APPS_METHOD = 'web_app_trigger_haptic_feedback';\n\n/**\n * A method tells that an impact occurred. The Telegram app may play the appropriate haptics based\n * on style value passed.\n * @param style - impact style.\n */\nexport function impactOccurred(style: ImpactHapticFeedbackStyle): void {\n  postEvent(MINI_APPS_METHOD, { type: 'impact', impact_style: style });\n}\n\n/**\n * @returns True if the haptic feedback is supported.\n */\nexport function isSupported(): boolean {\n  return supports(MINI_APPS_METHOD, $version());\n}\n\n/**\n * A method tells that a task or action has succeeded, failed, or produced a warning. The Telegram\n * app may play the appropriate haptics based on type value passed.\n * @param type - notification type.\n */\nexport function notificationOccurred(type: NotificationHapticFeedbackType): void {\n  postEvent(MINI_APPS_METHOD, { type: 'notification', notification_type: type });\n}\n\n/**\n * A method tells that the user has changed a selection. The Telegram app may play the\n * appropriate haptics.\n *\n * Do not use this feedback when the user makes or confirms a selection; use it only when the\n * selection changes.\n */\nexport function selectionChanged(): void {\n  postEvent(MINI_APPS_METHOD, { type: 'selection_change' });\n}\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\nimport { type InitData, retrieveLaunchParams } from '@telegram-apps/bridge';\n\n/* USUAL */\n\n/**\n * Complete component state.\n */\nexport const state = signal<InitData | undefined>(undefined);\n\n/* COMPUTED */\n\nfunction fromState<K extends keyof InitData>(key: K): Computed<InitData[K] | undefined> {\n  return computed(() => {\n    const s = state();\n    return s ? s[key] : undefined;\n  });\n}\n\n/**\n * @see InitData.authDate\n */\nexport const authDate = fromState('authDate');\n\n/**\n * @see InitData.canSendAfter\n */\nexport const canSendAfter = fromState('canSendAfter');\n\n/**\n * Date after which it is allowed to call\n * the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.\n */\nexport const canSendAfterDate = computed(() => {\n  const authDateValue = authDate();\n  const canSendAfterValue = canSendAfter();\n\n  return canSendAfterValue && authDateValue\n    ? new Date(authDateValue.getTime() + canSendAfterValue * 1000)\n    : undefined\n});\n\n/**\n * @see InitData.chat\n */\nexport const chat = fromState('chat');\n\n/**\n * @see InitData.chatType\n */\nexport const chatType = fromState('chatType');\n\n/**\n * @see InitData.chatInstance\n */\nexport const chatInstance = fromState('chatInstance');\n\n/**\n * @see InitData.hash\n */\nexport const hash = fromState('hash');\n\n/**\n * @see InitData.queryId\n */\nexport const queryId = fromState('queryId');\n\n/**\n * Raw representation of init data.\n */\nexport const raw = signal<string | undefined>();\n\n/**\n * @see InitData.receiver\n */\nexport const receiver = fromState('receiver');\n\n/**\n * Restores the component state.\n */\nexport function restore(): void {\n  const lp = retrieveLaunchParams();\n  state.set(lp.initData);\n  raw.set(lp.initDataRaw);\n}\n\n/**\n * @see InitData.startParam\n */\nexport const startParam = fromState('startParam');\n\n/**\n * @see InitData.user\n */\nexport const user = fromState('user');","import { initData } from '@telegram-apps/transformers';\nimport type { InitData } from '@telegram-apps/bridge';\n\n/**\n * Parses an incoming value as init data.\n * @param value - value to check.\n * @throws {} Parsing errors.\n */\nexport function parseInitData(value: unknown): InitData {\n  return initData()(value);\n}","import {\n  TypedError,\n  supports,\n  type ExecuteWithOptions,\n  type InvoiceStatus,\n  type ExecuteWithPostEvent,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { $version, request } from '@/scopes/globals.js';\nimport { ERR_INVALID_HOSTNAME, ERR_INVALID_SLUG, ERR_ALREADY_CALLED } from '@/errors.js';\n\nconst MINI_APPS_METHOD = 'web_app_open_invoice';\n\n/**\n * True if the invoice is currently opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * @returns True if the invoice is supported.\n */\nexport function isSupported(): boolean {\n  return supports(MINI_APPS_METHOD, $version());\n}\n\n/**\n * Opens an invoice using its slug.\n * Example of the value: `jd231xxSd1`\n * @param slug - invoice slug.\n * @param options - additional options.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_INVALID_HOSTNAME\n * @throws {TypedError} ERR_INVALID_SLUG\n */\nexport function open(slug: string, options?: ExecuteWithPostEvent): Promise<InvoiceStatus>;\n\n/**\n * Opens an invoice using its url.\n *\n * The function expects to pass a link in a full format, with the hostname \"t.me\".\n * Examples:\n * - `https://t.me/$jd231xxSd1`\n * - `https://t.me/invoice/jd231xxSd1`\n * @param url - invoice URL.\n * @param type - value type.\n * @param options - additional options.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_INVALID_HOSTNAME\n * @throws {TypedError} ERR_INVALID_SLUG\n */\nexport function open(\n  url: string,\n  type: 'url',\n  options?: ExecuteWithPostEvent,\n): Promise<InvoiceStatus>;\n\nexport async function open(\n  urlOrSlug: string,\n  optionsOrType?: 'url' | ExecuteWithOptions,\n  options?: ExecuteWithOptions,\n): Promise<InvoiceStatus> {\n  if (isOpened()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n\n  let slug: string;\n\n  if (optionsOrType === 'url') {\n    const { hostname, pathname } = new URL(urlOrSlug, window.location.href);\n    if (hostname !== 't.me') {\n      throw new TypedError(ERR_INVALID_HOSTNAME);\n    }\n\n    // Valid examples:\n    // \"/invoice/my-slug\"\n    // \"/$my-slug\"\n    const match = pathname.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n    if (!match) {\n      throw new TypedError(ERR_INVALID_SLUG);\n    }\n    [, , slug] = match;\n  } else {\n    slug = urlOrSlug;\n    options = optionsOrType;\n  }\n\n  isOpened.set(true);\n\n  return request(MINI_APPS_METHOD, 'invoice_closed', {\n    ...options,\n    params: { slug },\n    capture: (data) => slug === data.slug,\n  })\n    .then(r => r.status)\n    .finally(() => {\n      isOpened.set(false);\n    });\n}\n","import { toRGB } from '@telegram-apps/transformers';\n\n/**\n * @param color - color in any format acceptable by the `toRGB` function.\n * @returns True if the color is recognized as dark.\n * @see toRGB\n */\nexport function isColorDark(color: string): boolean {\n  const rgb = toRGB(color);\n\n  // Real formula: hsp = Math.sqrt(0.299 * r * r + 0.587 * g * g + 0.114 * b * b)\n  // See: https://stackoverflow.com/a/596243\n  return Math.sqrt(\n    [0.299, 0.587, 0.114].reduce<number>((acc, modifier, idx) => {\n      // Extract part of #RRGGBB pattern and convert it to DEC.\n      const dec = parseInt(rgb.slice(1 + idx * 2, 1 + (idx + 1) * 2), 16);\n      return acc + dec * dec * modifier;\n    }, 0),\n  ) < 120;\n}\n","import type { ThemeParams } from '@telegram-apps/bridge';\nimport { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { isColorDark } from '@/utils/isColorDark.js';\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * Complete component state.\n */\nexport const state = signal<ThemeParams>({});\n\nfunction fromState<K extends keyof ThemeParams>(key: K): Computed<ThemeParams[K] | undefined> {\n  return computed(() => state()[key]);\n}\n\n/**\n * @since v6.10\n */\nexport const accentTextColor = fromState('accentTextColor');\n\nexport const backgroundColor = fromState('bgColor');\n\nexport const buttonColor = fromState('buttonColor');\n\nexport const buttonTextColor = fromState('buttonTextColor');\n\n/**\n * @since v7.10\n */\nexport const bottomBarBgColor = fromState('bottomBarBgColor');\n\nexport const destructiveTextColor = fromState('destructiveTextColor');\n\n/**\n * @since v6.10\n */\nexport const headerBackgroundColor = fromState('headerBgColor');\n\nexport const hintColor = fromState('hintColor');\n\n/**\n * @returns True if the current color scheme is recognized as dark.\n * This value is calculated based on the current theme's background color.\n */\nexport const isDark = computed(() => {\n  const { bgColor } = state();\n  return !bgColor || isColorDark(bgColor);\n});\n\nexport const linkColor = fromState('linkColor');\n\nexport const secondaryBackgroundColor = fromState('secondaryBgColor');\n\n/**\n * @since v6.10\n */\nexport const sectionBackgroundColor = fromState('sectionBgColor');\n\n/**\n * @since v6.10\n */\nexport const sectionHeaderTextColor = fromState('sectionHeaderTextColor');\n\n/**\n * @since v7.6\n */\nexport const sectionSeparatorColor = fromState('sectionSeparatorColor');\n\n/**\n * @since v6.10\n */\nexport const subtitleTextColor = fromState('subtitleTextColor');\n\nexport const textColor = fromState('textColor');\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { buttonColor, buttonTextColor } from '@/scopes/components/theme-params/signals.js';\n\nimport type { State } from './types.js';\n\nfunction fromState<K extends keyof Required<State>>(key: K): Computed<Required<State>[K]> {\n  return computed(() => state()[key]);\n}\n\nexport const internalState = signal<State>({\n  hasShineEffect: false,\n  isEnabled: true,\n  isLoaderVisible: false,\n  isVisible: false,\n  text: 'Continue',\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<Required<State>>(() => {\n  const s = internalState();\n  return {\n    ...s,\n    backgroundColor: s.backgroundColor || buttonColor() || '#2481cc',\n    textColor: s.textColor || buttonTextColor() || '#ffffff',\n  };\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @see State.backgroundColor\n */\nexport const backgroundColor = fromState('backgroundColor');\n\n/**\n * @see State.hasShineEffect\n */\nexport const hasShineEffect = fromState('hasShineEffect');\n\n/**\n * @see State.isEnabled\n */\nexport const isEnabled = fromState('isEnabled');\n\n/**\n * @see State.isLoaderVisible\n */\nexport const isLoaderVisible = fromState('isLoaderVisible');\n\n/**\n * @see State.isVisible\n */\nexport const isVisible = fromState('isVisible');\n\n/**\n * @see State.text\n */\nexport const text = fromState('text');\n\n/**\n * @see State.textColor\n */\nexport const textColor = fromState('textColor');\n","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\n\nimport { internalState, isMounted, state } from './signals.js';\nimport type { State } from './types.js';\n\ntype StorageValue = State;\n\nconst MINI_APPS_METHOD = 'web_app_setup_main_button';\nconst CLICK_EVENT = 'main_button_pressed';\nconst STORAGE_KEY = 'mainButton';\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    const prev = isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY);\n    prev && internalState.set(prev);\n\n    internalState.sub(onInternalStateChanged);\n    subAndCall(state, onStateChanged);\n    isMounted.set(true);\n  }\n}\n\n/**\n * Adds a new main button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n */\nexport function onClick(fn: EventListener<'main_button_pressed'>): VoidFunction {\n  return on(CLICK_EVENT, fn);\n}\n\n/**\n * Removes the main button click listener.\n * @param fn - an event listener.\n */\nexport function offClick(fn: EventListener<'main_button_pressed'>): void {\n  off(CLICK_EVENT, fn);\n}\n\nfunction onInternalStateChanged(state: State): void {\n  setStorageValue<StorageValue>(STORAGE_KEY, state);\n}\n\nfunction onStateChanged(): void {\n  const s = state();\n\n  // We should not commit changes until the payload is correct.\n  // Some version of Telegram will crash due to the empty value of the text.\n  s.text && postEvent(MINI_APPS_METHOD, {\n    color: s.backgroundColor,\n    has_shine_effect: s.hasShineEffect,\n    is_active: s.isEnabled,\n    is_progress_visible: s.isLoaderVisible,\n    is_visible: s.isVisible,\n    text: s.text,\n    text_color: s.textColor,\n  });\n}\n\n/**\n * Updates the main button state.\n * @param updates - state changes to perform.\n */\nexport function setParams(updates: Partial<State>): void {\n  internalState.set({\n    ...internalState(),\n    ...Object.fromEntries(\n      Object.entries(updates).filter(([, v]) => v !== undefined),\n    ),\n  });\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n *\n * Note that this function does not remove listeners, added via the `onClick` function.\n * @see onClick\n */\nexport function unmount(): void {\n  internalState.unsub(onInternalStateChanged);\n  state.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import {\n  supports,\n  type MethodVersionedParams,\n  type MethodNameWithVersionedParams,\n} from '@telegram-apps/bridge';\n\nimport { $version } from '@/scopes/globals.js';\n\ntype HasCheckSupportMethodTuple = {\n  [M in MethodNameWithVersionedParams]: [M, MethodVersionedParams<M>]\n}[MethodNameWithVersionedParams];\n\nexport type WithSupports<\n  F extends (...args: any) => any,\n  S extends Record<string, HasCheckSupportMethodTuple>\n> = F & {\n  /**\n   * @returns True, if this function is supported.\n   */\n  supports(method: keyof S): boolean;\n};\n\n/**\n * Adds the \"supports\" method to the passed function returning true, if specified action is\n * supported by the current Mini Apps version.\n * @param fn - function to extend.\n * @param schema - map where key is an action name and value is a tuple containing Mini Apps\n * method name and its option.\n */\n\n/*@__NO_SIDE_EFFECTS__*/\nexport function withSupports<\n  F extends (...args: any) => any,\n  S extends Record<string, HasCheckSupportMethodTuple>,\n>(fn: F, schema: S): WithSupports<F, S> {\n  return Object.assign(fn, {\n    supports(method: keyof S): boolean {\n      const tuple = schema[method];\n      return supports(tuple[0], tuple[1], $version());\n    },\n  });\n}\n","import { themeParams } from '@telegram-apps/transformers';\nimport type { ThemeParams } from '@telegram-apps/bridge';\n\n/**\n * Parses incoming value as theme parameters.\n * @param value - value to parse.\n */\nexport function parseThemeParams(value: unknown): ThemeParams {\n  return themeParams()(value);\n}\n","import {\n  off,\n  on,\n  TypedError,\n  camelToKebab,\n  getStorageValue,\n  setStorageValue,\n  retrieveLaunchParams,\n  deleteCssVar,\n  setCssVar,\n  type EventListener,\n  type RGB,\n  type ThemeParams,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\n\nimport { isCssVarsBound, state, isMounted } from './signals.js';\nimport { parseThemeParams } from './parseThemeParams.js';\nimport type { GetCssVarNameFn } from './types.js';\n\ntype StorageValue = ThemeParams;\n\nconst STORAGE_KEY = 'themeParams';\nconst THEME_CHANGED_EVENT = 'theme_changed';\n\n/**\n * Creates CSS variables connected with the current theme parameters.\n *\n * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n * {name} is a theme parameters key name converted from camel case to kebab case.\n *\n * Default variables:\n * - `--tg-theme-bg-color`\n * - `--tg-theme-secondary-text-color`\n *\n * Variables are being automatically updated if theme parameters were changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * theme parameters key.\n * @returns Function to stop updating variables.\n * @throws TypedError ERR_ALREADY_CALLED\n */\nexport function bindCssVars(getCSSVarName?: GetCssVarNameFn): VoidFunction {\n  if (isCssVarsBound()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n  getCSSVarName ||= (prop) => `--tg-theme-${camelToKebab(prop)}`;\n\n  function forEachEntry(fn: (key: string, value: RGB) => void): void {\n    Object.entries(state()).forEach(([k, v]) => {\n      v && fn(k, v);\n    });\n  }\n\n  function actualize(): void {\n    forEachEntry((k, v) => {\n      setCssVar(getCSSVarName!(k), v);\n    });\n  }\n\n  actualize();\n  state.sub(actualize);\n  isCssVarsBound.set(true);\n\n  return () => {\n    forEachEntry(deleteCssVar);\n    state.unsub(actualize);\n    isCssVarsBound.set(false);\n  };\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    on(THEME_CHANGED_EVENT, onThemeChanged);\n    state.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || retrieveLaunchParams().themeParams);\n    isMounted.set(true);\n  }\n}\n\n/**\n * Actualizes the theme parameters whenever an according event was received.\n * @param e - event data.\n */\nconst onThemeChanged: EventListener<'theme_changed'> = (e) => {\n  const value = parseThemeParams(e.theme_params);\n  state.set(value);\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n};\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  off(THEME_CHANGED_EVENT, onThemeChanged);\n  isMounted.set(false);\n}\n","import { Computed, computed, signal } from '@telegram-apps/signals';\nimport { isRGB } from '@telegram-apps/transformers';\nimport type { BackgroundColor, BottomBarColor, RGB } from '@telegram-apps/bridge';\n\nimport { isColorDark } from '@/utils/isColorDark.js';\nimport {\n  backgroundColor as themeBgColor,\n  secondaryBackgroundColor as themeSecondaryBgColor,\n  bottomBarBgColor as themeBottomBarBgColor,\n} from '@/scopes/components/theme-params/signals.js';\n\nimport type { HeaderColor, State } from './types.js';\n\n// #__NO_SIDE_EFFECTS__\nfunction rgbBasedOn(signal: Computed<'bg_color' | 'secondary_bg_color' | RGB>) {\n  return computed<RGB | undefined>(() => {\n    const color = signal();\n\n    return isRGB(color) ? color : color === 'bg_color'\n      ? themeBgColor()\n      : themeSecondaryBgColor();\n  });\n}\n\n/**\n * The Mini App background color.\n */\nexport const backgroundColor = signal<BackgroundColor>('bg_color');\n\n/**\n * RGB representation of the background color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const backgroundColorRGB = rgbBasedOn(backgroundColor);\n\n\n/**\n * The Mini App bottom bar background color.\n */\nexport const bottomBarColor = signal<BottomBarColor>('bottom_bar_bg_color');\n\n/**\n * RGB representation of the bottom bar background color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const bottomBarColorRGB = computed<RGB | undefined>(() => {\n  const color = bottomBarColor();\n  return isRGB(color)\n    ? color\n    : color === 'bottom_bar_bg_color'\n      // Following the logic from the Telegram SDK.\n      // I removed \"|| '#ffffff'\" because this seems too strange to me. This is just not right.\n      ? themeBottomBarBgColor() || themeSecondaryBgColor()\n      : color === 'secondary_bg_color'\n        ? themeSecondaryBgColor()\n        : themeBgColor();\n});\n\n/**\n * The Mini App header color.\n */\nexport const headerColor = signal<HeaderColor>('bg_color');\n\n/**\n * RGB representation of the header color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const headerColorRGB = rgbBasedOn(headerColor);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * True if the current Mini App background color is recognized as dark.\n */\nexport const isDark = computed(() => {\n  const color = backgroundColorRGB();\n  return color ? isColorDark(color) : false;\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<State>(() => ({\n  backgroundColor: backgroundColor(),\n  bottomBarColor: bottomBarColor(),\n  headerColor: headerColor(),\n}));\n","import {\n  getStorageValue,\n  setStorageValue,\n  createCbCollector,\n  camelToKebab,\n  deleteCssVar,\n  setCssVar,\n  TypedError,\n  type RGB,\n  type BottomBarColor,\n} from '@telegram-apps/bridge';\nimport { isRGB } from '@telegram-apps/transformers';\nimport { isPageReload } from '@telegram-apps/navigation';\nimport type { Computed } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { withIsSupported } from '@/scopes/withIsSupported.js';\nimport { withSupports } from '@/scopes/withSupports.js';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\nimport { mount as tpMount } from '@/scopes/components/theme-params/methods.js';\nimport {\n  headerBackgroundColor as tpHeaderBackgroundColor,\n} from '@/scopes/components/theme-params/signals.js';\n\nimport {\n  headerColor,\n  backgroundColor,\n  isCssVarsBound,\n  state,\n  isMounted,\n  bottomBarColor,\n  headerColorRGB,\n  bottomBarColorRGB,\n  backgroundColorRGB,\n} from './signals.js';\nimport type { GetCssVarNameFn, HeaderColor, State } from './types.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\n\ntype StorageValue = State;\n\nconst SET_BG_COLOR_METHOD = 'web_app_set_background_color';\nconst SET_BOTTOM_BAR_BG_COLOR_METHOD = 'web_app_set_bottom_bar_color';\nconst SET_HEADER_COLOR_METHOD = 'web_app_set_header_color';\nconst STORAGE_KEY = 'miniApp';\n\n/**\n * Creates CSS variables connected with the mini app.\n *\n * Default variables:\n * - `--tg-bg-color`\n * - `--tg-header-color`\n * - `--tg-bottom-bar-color`\n *\n * Variables are being automatically updated if theme parameters were changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * mini app key.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_ALREADY_CALLED\n */\nexport function bindCssVars(getCSSVarName?: GetCssVarNameFn): VoidFunction {\n  if (isCssVarsBound()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n  const [addCleanup, cleanup] = createCbCollector();\n\n  /**\n   * Binds specified CSS variable to a signal.\n   * @param cssVar - CSS variable name.\n   * @param signal - signal to listen changes to.\n   */\n  function bind(cssVar: string, signal: Computed<RGB | undefined>) {\n    function update() {\n      setCssVar(cssVar, signal() || null);\n    }\n\n    // Instantly set CSS variable.\n    update();\n\n    // Remember to clean this relation up.\n    addCleanup(signal.sub(update), deleteCssVar.bind(null, cssVar));\n  }\n\n  getCSSVarName ||= (prop) => `--tg-${camelToKebab(prop)}`;\n  bind(getCSSVarName('bgColor'), backgroundColorRGB);\n  bind(getCSSVarName('bottomBarColor'), bottomBarColorRGB);\n  bind(getCSSVarName('headerColor'), headerColorRGB);\n  addCleanup(() => {\n    isCssVarsBound.set(false);\n  });\n\n  isCssVarsBound.set(true);\n\n  return cleanup;\n}\n\n/**\n * Closes the Mini App.\n * @param returnBack - Should the client return to the previous activity.\n */\nexport function close(returnBack?: boolean): void {\n  postEvent('web_app_close', { return_back: returnBack });\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n *\n * Internally, the function mounts the Theme Params component to work with correctly extracted\n * theme palette values.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    const s = isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY);\n    tpMount();\n\n    backgroundColor.set(s ? s.backgroundColor : 'bg_color');\n    bottomBarColor.set(s ? s.bottomBarColor : 'bottom_bar_bg_color');\n    headerColor.set(s ? s.headerColor : tpHeaderBackgroundColor() || 'bg_color');\n\n    subAndCall(backgroundColor, onBgColorChanged);\n    subAndCall(bottomBarColor, onBottomBarBgColorChanged);\n    subAndCall(headerColor, onHeaderColorChanged);\n\n    isMounted.set(true);\n  }\n}\n\nfunction onBgColorChanged(): void {\n  const color = backgroundColor();\n  saveState();\n  postEvent(SET_BG_COLOR_METHOD, { color });\n}\n\nfunction onBottomBarBgColorChanged(): void {\n  saveState();\n  postEvent(SET_BOTTOM_BAR_BG_COLOR_METHOD, { color: bottomBarColor() });\n}\n\nfunction onHeaderColorChanged(): void {\n  const color = headerColor();\n  saveState();\n  postEvent(SET_HEADER_COLOR_METHOD, isRGB(color) ? { color } : { color_key: color });\n}\n\n/**\n * Informs the Telegram app that the Mini App is ready to be displayed.\n *\n * It is recommended to call this method as early as possible, as soon as all essential\n * interface elements loaded.\n *\n * Once this method is called, the loading placeholder is hidden and the Mini App shown.\n *\n * If the method is not called, the placeholder will be hidden only when the page was fully loaded.\n */\nexport function ready(): void {\n  postEvent('web_app_ready');\n}\n\nfunction saveState() {\n  setStorageValue<StorageValue>(STORAGE_KEY, state());\n}\n\n/**\n * Updates the background color.\n */\nexport const setBackgroundColor = withIsSupported((color: RGB): void => {\n  backgroundColor.set(color);\n}, SET_BG_COLOR_METHOD);\n\n/**\n * Updates the bottom bar background color.\n */\nexport const setBottomBarColor = withIsSupported((color: BottomBarColor) => {\n  bottomBarColor.set(color);\n}, SET_BOTTOM_BAR_BG_COLOR_METHOD);\n\n/**\n * Updates the header color.\n */\nexport const setHeaderColor = withSupports(\n  withIsSupported((color: HeaderColor): void => {\n    headerColor.set(color);\n  }, SET_HEADER_COLOR_METHOD),\n  { color: [SET_HEADER_COLOR_METHOD, 'color'] },\n);\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  backgroundColor.unsub(onBgColorChanged);\n  bottomBarColor.unsub(onBottomBarBgColorChanged);\n  headerColor.unsub(onHeaderColorChanged);\n  isMounted.set(false);\n}\n","import { type PopupParams, TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_POPUP_INVALID_PARAMS } from '@/errors.js';\n\nimport type { OpenOptions } from './types.js';\n\n/**\n * Prepares popup parameters before sending them to native app.\n * @param params - popup parameters.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid title\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid message\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid buttons count\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button id length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid text length.\n */\nexport function prepareParams(params: OpenOptions): PopupParams {\n  const message = params.message.trim();\n  const title = (params.title || '').trim();\n  const buttons = params.buttons || [];\n\n  if (title.length > 64) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid title: ${title}`);\n  }\n  if (!message || message.length > 256) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid message: ${message}`);\n  }\n  if (buttons.length > 3) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid buttons count: ${buttons.length}`);\n  }\n\n  return {\n    title,\n    message,\n    buttons: buttons.length\n      ? buttons.map((b, idx) => {\n        const id = b.id || '';\n        if (id.length > 64) {\n          throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Button with index ${idx} has invalid id: ${id}`);\n        }\n\n        if (!b.type || b.type === 'default' || b.type === 'destructive') {\n          const text = b.text.trim();\n          if (!text || text.length > 64) {\n            throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Button with index ${idx} has invalid text: ${text}`);\n          }\n          return { type: b.type, text, id };\n        }\n        return { type: b.type, id };\n      })\n      : [{ type: 'close', id: '' }],\n  };\n}","import { TypedError, supports } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { $version, request } from '@/scopes/globals.js';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\n\nimport { prepareParams } from './prepareParams.js';\nimport type { OpenOptions } from './types.js';\n\nconst MINI_APPS_METHOD = 'web_app_open_popup';\n\n/**\n * @returns True if the back button is supported.\n */\nexport function isSupported(): boolean {\n  return supports(MINI_APPS_METHOD, $version());\n}\n\n/**\n * True if a popup is currently opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * A method that shows a native popup described by the `params` argument.\n * The promise will be resolved when the popup is closed. Resolved value will have\n * an identifier of pressed button.\n *\n * If a user clicked outside the popup or clicked the top right popup close button, null will be\n * returned.\n *\n * @param options - popup parameters.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid title length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid message length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid buttons length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button id length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid text length.\n */\nexport async function open(options: OpenOptions): Promise<string | null> {\n  if (isOpened()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n  isOpened.set(true);\n\n  try {\n    const { button_id: buttonId = null } = await request(MINI_APPS_METHOD, 'popup_closed', {\n      ...options,\n      params: prepareParams(options),\n    });\n    return buttonId;\n  } finally {\n    isOpened.set(false);\n  }\n}\n","import {\n  CancelablePromise,\n  createCbCollector,\n  TypedError,\n  on,\n  EnhancedPromise,\n  supports,\n  type ExecuteWithOptions,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\n\ninterface OpenSharedOptions extends ExecuteWithOptions {\n  /**\n   * Title to be displayed in the scanner.\n   */\n  text?: string;\n}\n\nconst CLOSE_METHOD = 'web_app_close_scan_qr_popup';\nconst OPEN_METHOD = 'web_app_open_scan_qr_popup';\nconst CLOSED_EVENT = 'scan_qr_popup_closed';\nconst SCANNED_EVENT = 'qr_text_received';\n\n/**\n * Closes the scanner.\n */\nexport function close(): void {\n  isOpened.set(false);\n  postEvent(CLOSE_METHOD);\n}\n\n/**\n * True if the scanner is currently opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * @returns True if the QR scanner is supported.\n */\nexport function isSupported(): boolean {\n  return supports(OPEN_METHOD, $version());\n}\n\n/**\n * Opens the scanner and returns a promise which will be resolved with the QR content if the\n * `capture` function returned true.\n *\n * Promise may also be resolved to null if the scanner was closed.\n * @param options - method options.\n * @returns A promise with QR content presented as string or undefined if the scanner was closed.\n * @throws {TypedError} ERR_ALREADY_CALLED\n */\nexport function open(options?: OpenSharedOptions & {\n  /**\n   * Function, which should return true if a scanned QR should be captured.\n   * @param qr - scanned QR content.\n   */\n  capture?: (qr: string) => boolean;\n}): CancelablePromise<string | undefined>;\n\n/**\n * Opens the scanner and calls the `onCaptured` function each time, a QR was scanned.\n *\n * The method does not return anything and expects the scanner to be closed externally by a user\n * or via the `close` method.\n * @param options - method options.\n * @throws {TypedError} ERR_ALREADY_CALLED\n */\nexport function open(options: OpenSharedOptions & {\n  /**\n   * Function which will be called if some QR code was scanned.\n   * @param qr - scanned QR content.\n   */\n  onCaptured: (qr: string) => void;\n}): CancelablePromise<void>;\n\nexport function open(options?: OpenSharedOptions & {\n  onCaptured?: (qr: string) => void;\n  capture?: (qr: string) => boolean;\n}): CancelablePromise<string | void> {\n  return CancelablePromise.withFn((abortSignal) => {\n    if (isOpened()) {\n      throw new TypedError(ERR_ALREADY_CALLED);\n    }\n    isOpened.set(true);\n\n    options ||= {};\n    const { onCaptured, text, capture } = options;\n    const [, cleanup] = createCbCollector(\n      // Whenever the scanner was closed for some reason (by a developer or a user), we should\n      // resolve the promise with undefined.\n      isOpened.sub(() => {\n        promise.resolve();\n      }),\n      // Whenever user closed the scanner, update the isOpened signal state.\n      on(CLOSED_EVENT, () => {\n        isOpened.set(false);\n      }),\n      // Whenever some QR was scanned, we should check if it must be captured.\n      on(SCANNED_EVENT, (event) => {\n        if (onCaptured) {\n          onCaptured(event.data);\n        } else if (capture && capture(event.data)) {\n          promise.resolve(event.data);\n          close();\n        }\n      }),\n    );\n\n    const promise = new EnhancedPromise<string | void>({ abortSignal })\n      .catch(close)\n      .finally(cleanup);\n\n    (options.postEvent || postEvent)(OPEN_METHOD, { text });\n\n    return promise;\n  }, options);\n}\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { buttonColor } from '@/scopes/components/theme-params/signals.js';\nimport { bottomBarColorRGB } from '@/scopes/components/mini-app/signals.js';\n\nimport type { State } from './types.js';\n\nfunction fromState<K extends keyof Required<State>>(key: K): Computed<Required<State>[K]> {\n  return computed(() => state()[key]);\n}\n\nexport const internalState = signal<State>({\n  hasShineEffect: false,\n  isEnabled: true,\n  isLoaderVisible: false,\n  isVisible: false,\n  position: 'left',\n  text: 'Cancel',\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<Required<State>>(() => {\n  const s = internalState();\n  return {\n    ...s,\n    backgroundColor: s.backgroundColor || bottomBarColorRGB() || '#000000',\n    textColor: s.textColor || buttonColor() || '#2481cc',\n  };\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @see State.backgroundColor\n */\nexport const backgroundColor = fromState('backgroundColor');\n\n/**\n * @see State.hasShineEffect\n */\nexport const hasShineEffect = fromState('hasShineEffect');\n\n/**\n * @see State.isEnabled\n */\nexport const isEnabled = fromState('isEnabled');\n\n/**\n * @see State.isLoaderVisible\n */\nexport const isLoaderVisible = fromState('isLoaderVisible');\n\n/**\n * @see State.isVisible\n */\nexport const isVisible = fromState('isVisible');\n\n/**\n * @see State.position\n */\nexport const position = fromState('position');\n\n/**\n * @see State.text\n */\nexport const text = fromState('text');\n\n/**\n * @see State.textColor\n */\nexport const textColor = fromState('textColor');\n","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener, supports,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\n\nimport { internalState, isMounted, state } from './signals.js';\nimport type { State } from './types.js';\n\ntype StorageValue = State;\n\nconst MINI_APPS_METHOD = 'web_app_setup_secondary_button';\nconst CLICK_EVENT = 'secondary_button_pressed';\nconst STORAGE_KEY = 'secondaryButton';\n\n/**\n * @returns True if the Secondary Button is supported.\n */\nexport function isSupported(): boolean {\n  return supports(MINI_APPS_METHOD, $version());\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    const prev = isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY);\n    prev && internalState.set(prev);\n\n    internalState.sub(onInternalStateChanged);\n    subAndCall(state, onStateChanged);\n    isMounted.set(true);\n  }\n}\n\n/**\n * Adds a new main button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n */\nexport function onClick(fn: EventListener<'secondary_button_pressed'>): VoidFunction {\n  return on(CLICK_EVENT, fn);\n}\n\n/**\n * Removes the main button click listener.\n * @param fn - an event listener.\n */\nexport function offClick(fn: EventListener<'secondary_button_pressed'>): void {\n  off(CLICK_EVENT, fn);\n}\n\nfunction onInternalStateChanged(s: State): void {\n  setStorageValue<StorageValue>(STORAGE_KEY, s);\n}\n\nfunction onStateChanged(): void {\n  const s = state();\n\n  // We should not commit changes until the payload is correct. Some version of Telegram will\n  // crash due to the empty value of the text.\n  s.text && postEvent(MINI_APPS_METHOD, {\n    color: s.backgroundColor,\n    has_shine_effect: s.hasShineEffect,\n    is_active: s.isEnabled,\n    is_progress_visible: s.isLoaderVisible,\n    is_visible: s.isVisible,\n    position: s.position,\n    text: s.text,\n    text_color: s.textColor,\n  });\n}\n\n/**\n * Updates the main button state.\n * @param updates - state changes to perform.\n */\nexport function setParams(updates: Partial<State>): void {\n  internalState.set({\n    ...internalState(),\n    ...Object.fromEntries(\n      Object.entries(updates).filter(([, v]) => v !== undefined),\n    ),\n  });\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n *\n * Note that this function does not remove listeners, added via the `onClick` function.\n * @see onClick\n */\nexport function unmount(): void {\n  internalState.unsub(onInternalStateChanged);\n  state.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  supports,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\n\ntype StorageValue = boolean;\n\nconst MINI_APPS_METHOD = 'web_app_setup_settings_button';\nconst CLICK_EVENT = 'settings_button_pressed';\nconst STORAGE_KEY = 'settingsButton';\n\n/**\n * Hides the settings button.\n */\nexport function hide(): void {\n  isVisible.set(false);\n}\n\n/**\n * True if the component is currently visible.\n */\nexport const isVisible = signal(false);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @returns True if the settings button is supported.\n */\nexport function isSupported(): boolean {\n  return supports(MINI_APPS_METHOD, $version());\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    isVisible.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || false);\n    subAndCall(isVisible, onStateChanged);\n    isMounted.set(true);\n  }\n}\n\nfunction onStateChanged() {\n  const value = isVisible();\n  postEvent(MINI_APPS_METHOD, { is_visible: value });\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n}\n\n/**\n * Add a new settings button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n */\nexport function onClick(fn: EventListener<'settings_button_pressed'>): VoidFunction {\n  return on(CLICK_EVENT, fn);\n}\n\n/**\n * Removes the settings button click listener.\n * @param fn - an event listener.\n */\nexport function offClick(fn: EventListener<'settings_button_pressed'>): void {\n  off(CLICK_EVENT, fn);\n}\n\n/**\n * Shows the settings button.\n */\nexport function show(): void {\n  isVisible.set(true);\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n *\n * Note that this function does not remove listeners, added via the `onClick` function.\n * @see onClick\n */\nexport function unmount() {\n  isVisible.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import { isPageReload } from '@telegram-apps/navigation';\nimport { getStorageValue, setStorageValue, supports } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\n\ntype StorageValue = boolean;\n\nconst MINI_APPS_METHOD = 'web_app_setup_swipe_behavior';\nconst STORAGE_KEY = 'swipeBehavior';\n\n/**\n * Disables vertical swipes.\n */\nexport function disableVertical(): void {\n  isVerticalEnabled.set(false);\n}\n\n/**\n * Enables vertical swipes.\n */\nexport function enableVertical(): void {\n  isVerticalEnabled.set(true);\n}\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if vertical swipes are enabled.\n */\nexport const isVerticalEnabled = signal(false);\n\n/**\n * @returns True if the back button is supported.\n */\nexport function isSupported(): boolean {\n  return supports(MINI_APPS_METHOD, $version());\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    isVerticalEnabled.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || false);\n    subAndCall(isVerticalEnabled, onStateChanged);\n    isMounted.set(true);\n  }\n}\n\nfunction onStateChanged(): void {\n  const value = isVerticalEnabled();\n  postEvent(MINI_APPS_METHOD, { allow_vertical_swipe: value });\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  isVerticalEnabled.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport type { State } from './types.js';\n\n/* USUAL */\n\n/**\n * Complete component state.\n */\nexport const state = signal<State>({\n  height: 0,\n  width: 0,\n  isExpanded: false,\n  stableHeight: 0,\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * True if the component is currently mounting.\n */\nexport const isMounting = signal<boolean>(false);\n\n/**\n * Error occurred while mounting the component.\n */\nexport const mountError = signal<Error | undefined>(undefined);\n\n/* COMPUTED */\n\nfunction createStateComputed<K extends keyof State>(key: K): Computed<State[K] | undefined> {\n  return computed(() => state()[key]);\n}\n\n/**\n * The current height of the **visible area** of the Mini App.\n *\n * The application can display just the top part of the Mini App, with its lower part remaining\n * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n * maximum height, while the bot can do the same by calling `expand` method. As the position of\n * the Mini App changes, the current height value of the visible area will be updated  in real\n * time.\n *\n * Please note that the refresh rate of this value is not sufficient to smoothly follow the\n * lower border of the window. It should not be used to pin interface elements to the bottom\n * of the visible area. It's more appropriate to use the value of the `stableHeight`\n * field for this purpose.\n *\n * @see stableHeight\n */\nexport const height = createStateComputed('height');\n\n/**\n * True if the Mini App is expanded to the maximum available height. Otherwise, if\n * the Mini App occupies part of the screen and can be expanded to the full height using\n * `expand` method.\n * @see expand\n */\nexport const isExpanded = createStateComputed('isExpanded');\n\n/**\n * True if the current viewport height is stable and is not going to change in the next moment.\n */\nexport const isStable = computed(() => {\n  const s = state();\n  return s.height === s.stableHeight;\n});\n\n/**\n * The height of the visible area of the Mini App in its last stable state.\n *\n * The application can display just the top part of the Mini App, with its lower part remaining\n * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n * maximum height, while the application can do the same by calling `expand` method.\n *\n * Unlike the value of `height`, the value of `stableHeight` does not change as the position\n * of the Mini App changes with user gestures or during animations. The value of `stableHeight`\n * will be updated after all gestures and animations are completed and the Mini App reaches its\n * final size.\n *\n * @see height\n */\nexport const stableHeight = createStateComputed('stableHeight');\n\n/**\n * Currently visible area width.\n */\nexport const width = createStateComputed('width');","import type { ExecuteWithOptions, CancelablePromise } from '@telegram-apps/bridge';\n\nimport { request as _request } from '@/scopes/globals.js';\n\nexport interface RequestResult {\n  height: number;\n  isExpanded: boolean;\n  isStable: boolean;\n  width: number;\n}\n\n/**\n * Requests viewport actual information from the Telegram application.\n * @param options - request options.\n */\nexport function request(options?: ExecuteWithOptions): CancelablePromise<RequestResult> {\n  return _request('web_app_request_viewport', 'viewport_changed', options).then(r => ({\n    height: r.height,\n    width: r.width,\n    isExpanded: r.is_expanded,\n    isStable: r.is_state_stable,\n  }));\n}\n\nexport type * from './types.js';\n","import {\n  off,\n  on,\n  retrieveLaunchParams,\n  camelToKebab,\n  getStorageValue,\n  setStorageValue,\n  deleteCssVar,\n  setCssVar,\n  TypedError,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\nimport { createMountFn } from '@/scopes/createMountFn.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\n\nimport { type GetCSSVarNameFn, request } from './static.js';\nimport {\n  state,\n  mountError,\n  isMounted,\n  isCssVarsBound,\n  isMounting,\n} from './signals.js';\nimport type { State } from './types.js';\n\ninterface StorageValue {\n  height: number;\n  isExpanded: boolean;\n  stableHeight: number;\n  width: number;\n}\n\n/**\n * Creates CSS variables connected with the current viewport.\n *\n * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n * {name} is a theme parameters key name converted from camel case to kebab case.\n *\n * Default variables:\n * - `--tg-viewport-height`\n * - `--tg-viewport-width`\n * - `--tg-viewport-stable-height`\n *\n * Variables are being automatically updated if viewport was changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * viewport property.\n * @returns Function to stop updating variables.\n * @throws TypedError ERR_ALREADY_CALLED\n */\nexport function bindCssVars(getCSSVarName?: GetCSSVarNameFn): VoidFunction {\n  if (isCssVarsBound()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n  getCSSVarName ||= (prop) => `--tg-viewport-${camelToKebab(prop)}`;\n  const props = ['height', 'width', 'stableHeight'] as const;\n\n  function actualize(): void {\n    props.forEach(prop => {\n      setCssVar(getCSSVarName!(prop), `${state()[prop]}px`);\n    });\n  }\n\n  actualize();\n  state.sub(actualize);\n  isCssVarsBound.set(true);\n\n  return () => {\n    props.forEach(deleteCssVar);\n    state.unsub(actualize);\n    isCssVarsBound.set(false);\n  };\n}\n\n/**\n * A method that expands the Mini App to the maximum available height. To find out if the Mini\n * App is expanded to the maximum height, refer to the value of the `isExpanded`.\n * @see isExpanded\n */\nexport function expand(): void {\n  postEvent('web_app_expand');\n}\n\nfunction formatState(state: State): State {\n  return {\n    isExpanded: state.isExpanded,\n    height: truncate(state.height),\n    width: truncate(state.width),\n    stableHeight: truncate(state.stableHeight),\n  };\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport const mount = createMountFn<State>(\n  options => {\n    // Try to restore the state using the storage.\n    const s = isPageReload() && getStorageValue<StorageValue>('viewport');\n    if (s) {\n      return s;\n    }\n\n    // If the platform has a stable viewport, it means we could use the window global object\n    // properties.\n    if ([\n      'macos',\n      'tdesktop',\n      'unigram',\n      'webk',\n      'weba',\n      'web',\n    ].includes(retrieveLaunchParams().platform)) {\n      const w = window;\n      return {\n        isExpanded: true,\n        height: w.innerHeight,\n        width: w.innerWidth,\n        stableHeight: w.innerHeight,\n      };\n    }\n\n    // We were unable to retrieve data locally. In this case, we are sending a request returning\n    // the viewport information.\n    options.timeout ||= 1000;\n    return request(options).then(data => ({\n      height: data.height,\n      isExpanded: data.isExpanded,\n      stableHeight: data.isStable ? data.height : state().stableHeight,\n      width: data.width,\n    }));\n  },\n  result => {\n    on('viewport_changed', onViewportChanged);\n    subAndCall(state, onStateChanged);\n    state.set(formatState(result));\n  },\n  { isMounted, isMounting, mountError },\n);\n\nconst onViewportChanged: EventListener<'viewport_changed'> = (data) => {\n  state.set(formatState({\n    height: data.height,\n    width: data.width,\n    isExpanded: data.is_expanded,\n    stableHeight: data.is_state_stable ? data.height : state().stableHeight,\n  }));\n};\n\nfunction onStateChanged(): void {\n  setStorageValue<StorageValue>('viewport', state());\n}\n\n/**\n * Formats value to make it stay in bounds [0, +Inf).\n * @param value - value to format.\n */\nfunction truncate(value: number): number {\n  return Math.max(value, 0);\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  off('viewport_changed', onViewportChanged);\n  state.unsub(onStateChanged);\n}\n","import { supports, TypedError, type OpenLinkBrowser } from '@telegram-apps/bridge';\nimport { createSafeURL } from '@telegram-apps/navigation';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { ERR_INVALID_HOSTNAME } from '@/errors.js';\n\nexport interface OpenLinkOptions {\n  /**\n   * Attempts to use the instant view mode.\n   */\n  tryInstantView?: boolean;\n  /**\n   * A preferred browser to open the link in.\n   */\n  tryBrowser?: OpenLinkBrowser;\n}\n\nconst OPEN_TG_LINK_METHOD = 'web_app_open_tg_link';\n\n/**\n * Opens a link.\n *\n * The Mini App will not be closed.\n *\n * Note that this method can be called only in response to the user\n * interaction with the Mini App interface (e.g. click inside the Mini App or on the main button).\n * @param url - URL to be opened.\n * @param options - additional options.\n */\nexport function openLink(url: string, options?: OpenLinkOptions): void {\n  options ||= {};\n  postEvent('web_app_open_link', {\n    url: createSafeURL(url).toString(),\n    try_browser: options.tryBrowser,\n    try_instant_view: options.tryInstantView,\n  });\n}\n\n/**\n * Opens a Telegram link inside Telegram app. The Mini App will be closed. It expects passing\n * links in full format, with hostname \"t.me\".\n * @param url - URL to be opened.\n * @throws {TypedError} ERR_INVALID_HOSTNAME\n */\nexport function openTelegramLink(url: string): void {\n  const { hostname, pathname, search } = new URL(url, 'https://t.me');\n  if (hostname !== 't.me') {\n    throw new TypedError(ERR_INVALID_HOSTNAME);\n  }\n\n  if (!supports(OPEN_TG_LINK_METHOD, $version())) {\n    window.location.href = url;\n    return;\n  }\n\n  postEvent(OPEN_TG_LINK_METHOD, { path_full: pathname + search });\n}\n\n/**\n * Shares specified URL with the passed to the chats, selected by user. After being called,\n * it closes the mini application.\n *\n * This method uses Telegram's Share Links.\n * @param url - URL to share.\n * @param text - text to append after the URL.\n * @see https://core.telegram.org/api/links#share-links\n * @see https://core.telegram.org/widgets/share#custom-buttons\n */\nexport function shareURL(url: string, text?: string): void {\n  openTelegramLink(\n    `https://t.me/share/url?` + new URLSearchParams({ url, text: text || '' })\n      .toString()\n      // By default, URL search params encode spaces with \"+\".\n      // We are replacing them with \"%20\", because plus symbols are working incorrectly\n      // in Telegram.\n      .replace(/\\+/g, '%20'),\n  );\n}\n","import {\n  TypedError,\n  CancelablePromise,\n  sleep,\n  type PhoneRequestedStatus,\n  type WriteAccessRequestedStatus,\n  type ExecuteWithOptions,\n} from '@telegram-apps/bridge';\nimport { searchParams, object, number, string, date } from '@telegram-apps/transformers';\n\nimport { invokeCustomMethod, request } from '@/scopes/globals.js';\nimport { withIsSupported } from '@/scopes/withIsSupported.js';\nimport { ERR_ACCESS_DENIED, ERR_ALREADY_CALLED } from '@/errors.js';\nimport { signal } from '@telegram-apps/signals';\n\n/**\n * Requested contact information.\n */\nexport interface RequestedContact {\n  contact: {\n    userId: number;\n    phoneNumber: string;\n    firstName: string;\n    lastName?: string;\n  };\n  authDate: Date;\n  hash: string;\n}\n\nconst REQUEST_PHONE_METHOD = 'web_app_request_phone';\nconst REQUEST_WRITE_ACCESS_METHOD = 'web_app_request_write_access';\n\n/**\n * True if phone access is currently being requested.\n */\nexport const isRequestingPhoneAccess = signal(false);\n\n/**\n * True if write access is currently being requested.\n */\nexport const isRequestingWriteAccess = signal(false);\n\n/**\n * Attempts to get requested contact.\n * @param options - execution options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nfunction getRequestedContact(options?: ExecuteWithOptions): CancelablePromise<RequestedContact> {\n  options ||= {};\n  return invokeCustomMethod('getRequestedContact', {}, {\n    ...options,\n    timeout: options.timeout || 5000,\n  })\n    .then(\n      searchParams({\n        contact: object({\n          userId: ['user_id', number()],\n          phoneNumber: ['phone_number', string()],\n          firstName: ['first_name', string()],\n          lastName: ['last_name', string(true)],\n        })(),\n        authDate: ['auth_date', date()],\n        hash: string(),\n      })(),\n    );\n}\n\n/**\n * Requests current user contact information. In contrary to requestPhoneAccess, this method\n * returns promise with contact information that rejects in case, user denied access, or request\n * failed.\n * @param options - additional options.\n * @throws {TypedError} ERR_ACCESS_DENIED\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport const requestContact = withIsSupported(\n  (options?: ExecuteWithOptions): CancelablePromise<RequestedContact> => {\n    return new CancelablePromise(\n      async (res, _, abortSignal) => {\n        const asyncOptions = {\n          postEvent: (options || {}).postEvent,\n          abortSignal,\n        };\n\n        // First of all, let's try to get the requested contact.\n        // Probably, we already requested it before.\n        try {\n          return res(await getRequestedContact(asyncOptions));\n        } catch {\n        }\n\n        // Then, request access to the user's phone.\n        const status = await requestPhoneAccess(asyncOptions);\n        if (status !== 'sent') {\n          throw new TypedError(ERR_ACCESS_DENIED);\n        }\n\n        // Time to wait before executing the next request.\n        let sleepTime = 50;\n\n        // We are trying to retrieve the requested contact until the deadline was reached.\n        while (!abortSignal.aborted) {\n          try {\n            return res(await getRequestedContact(asyncOptions));\n          } catch {\n          }\n\n          // Sleep for some time.\n          await sleep(sleepTime);\n\n          // Increase the sleep time not to kill the backend service.\n          sleepTime += 50;\n        }\n      }, options,\n    );\n  },\n  REQUEST_PHONE_METHOD,\n);\n\n/**\n * Requests current user phone access. Method returns promise, which resolves\n * status of the request. In case, user accepted the request, Mini App bot will receive\n * the according notification.\n *\n * To obtain the retrieved information instead, utilize the `requestContact` method.\n * @param options - additional options.\n * @see requestContact\n * @throws {TypedError} ERR_ALREADY_CALLED\n */\nexport const requestPhoneAccess = withIsSupported(\n  (options?: ExecuteWithOptions): Promise<PhoneRequestedStatus> => {\n    if (isRequestingPhoneAccess()) {\n      throw new TypedError(ERR_ALREADY_CALLED);\n    }\n    isRequestingPhoneAccess.set(true);\n\n    return request(REQUEST_PHONE_METHOD, 'phone_requested', options)\n      .then(r => r.status)\n      .finally(() => {\n        isRequestingPhoneAccess.set(false);\n      });\n  }, REQUEST_PHONE_METHOD,\n);\n\n/**\n * Requests write message access to the current user.\n * @param options - additional options.\n * @throws {TypedError} ERR_ALREADY_CALLED\n */\nexport const requestWriteAccess = withIsSupported(\n  (options?: ExecuteWithOptions): Promise<WriteAccessRequestedStatus> => {\n    if (isRequestingWriteAccess()) {\n      throw new TypedError(ERR_ALREADY_CALLED);\n    }\n    isRequestingWriteAccess.set(true);\n\n    return request(REQUEST_WRITE_ACCESS_METHOD, 'write_access_requested', options)\n      .then(r => r.status)\n      .finally(() => {\n        isRequestingWriteAccess.set(false);\n      });\n  }, REQUEST_WRITE_ACCESS_METHOD,\n);\n","import {\n  captureSameReq,\n  retrieveLaunchParams,\n  CancelablePromise,\n  TypedError,\n  type ExecuteWithOptions,\n  type SwitchInlineQueryChatType,\n  type ExecuteWithPostEvent,\n} from '@telegram-apps/bridge';\n\nimport { postEvent, createRequestId, request } from '@/scopes/globals.js';\nimport { withIsSupported } from '@/scopes/withIsSupported.js';\nimport { ERR_DATA_INVALID_SIZE } from '@/errors.js';\n\nconst READ_TEXT_FROM_CLIPBOARD_METHOD = 'web_app_read_text_from_clipboard';\nconst SWITCH_INLINE_QUERY_METHOD = 'web_app_switch_inline_query';\nconst SHARE_STORY_METHOD = 'web_app_share_to_story';\n\ninterface ShareStoryOptions extends ExecuteWithPostEvent {\n  /**\n   * The caption to be added to the media.\n   * 0-200 characters for regular users and 0-2048 characters for premium subscribers.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  text?: string;\n  /**\n   * An object that describes a widget link to be included in the story.\n   * Note that only premium subscribers can post stories with links.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  widgetLink?: {\n    /**\n     * The URL to be included in the story.\n     */\n    url: string;\n    /**\n     * The name to be displayed for the widget link, 0-48 characters.\n     */\n    name?: string;\n  };\n}\n\n/**\n * Reads a text from the clipboard and returns a string or null. null is returned\n * in cases:\n * - A value in the clipboard is not a text.\n * - Access to the clipboard is not granted.\n */\nexport const readTextFromClipboard = withIsSupported(\n  (options?: ExecuteWithOptions): CancelablePromise<string | null> => {\n    const reqId = createRequestId();\n\n    return request(READ_TEXT_FROM_CLIPBOARD_METHOD, 'clipboard_text_received', {\n      ...options,\n      params: { req_id: reqId },\n      capture: captureSameReq(reqId),\n    }).then(({ data = null }) => data);\n  }, READ_TEXT_FROM_CLIPBOARD_METHOD,\n);\n\n/**\n * A method used to send data to the bot.\n *\n * When this method called, a service message sent to the bot containing the data of the length\n * up to 4096 bytes, and the Mini App closed.\n *\n * See the field `web_app_data` in the class [Message](https://core.telegram.org/bots/api#message).\n *\n * This method is only available for Mini Apps launched via a Keyboard button.\n * @param data - data to send to bot.\n * @throws {TypedError} ERR_DATA_INVALID_SIZE\n */\nexport function sendData(data: string): void {\n  const { size } = new Blob([data]);\n  if (!size || size > 4096) {\n    throw new TypedError(ERR_DATA_INVALID_SIZE);\n  }\n  postEvent('web_app_data_send', { data });\n}\n\n/**\n * A method that opens the native story editor.\n * @since v7.8\n */\nexport const shareStory = withIsSupported(\n  (mediaUrl: string, options?: ShareStoryOptions) => {\n    options ||= {};\n    (options.postEvent || postEvent)(SHARE_STORY_METHOD, {\n      text: options.text,\n      media_url: mediaUrl,\n      widget_link: options.widgetLink,\n    });\n  }, SHARE_STORY_METHOD,\n);\n\n/**\n * Inserts the bot's username and the specified inline query in the current chat's input field.\n * Query may be empty, in which case only the bot's username will be inserted. The client prompts\n * the user to choose a specific chat, then opens that chat and inserts the bot's username and\n * the specified inline query in the input field.\n * @param query - text which should be inserted in the input after the current bot name. Max\n * length is 256 symbols.\n * @param chatTypes - List of chat types which could be chosen to send the message. Could be\n * empty list.\n */\nexport const switchInlineQuery = withIsSupported(\n  (query: string, chatTypes?: SwitchInlineQueryChatType[]) => {\n    postEvent(SWITCH_INLINE_QUERY_METHOD, {\n      query: query,\n      chat_types: chatTypes || [],\n    });\n  },\n  SWITCH_INLINE_QUERY_METHOD,\n  () => !!retrieveLaunchParams().botInline,\n);\n","/**\n * @returns True, if current environment is server.\n */\nexport function isSSR(): boolean {\n  return typeof window === 'undefined';\n}\n","import {\n  createCbCollector,\n  defineEventHandlers,\n  on,\n  removeEventHandlers,\n} from '@telegram-apps/bridge';\n\nimport { postEvent, configure, type ConfigureOptions } from '@/scopes/globals.js';\n\nexport interface InitOptions extends ConfigureOptions {\n  /**\n   * True if SDK should accept styles sent from the Telegram application.\n   * @default true\n   */\n  acceptCustomStyles?: boolean;\n}\n\n/**\n * Initializes the SDK allowing it to properly handle events, sent from the native Telegram\n * application.\n * @param options - function options.\n * @returns A function, to perform a cleanup.\n */\nexport function init(options?: InitOptions): VoidFunction {\n  // Configure the package global dependencies.\n  configure(options);\n\n  // Define event handlers, so we could receive the events from the Telegram application.\n  defineEventHandlers();\n\n  const [addCleanup, cleanup] = createCbCollector(\n    on('reload_iframe', () => {\n      postEvent('iframe_will_reload');\n      window.location.reload();\n    }),\n    removeEventHandlers,\n  );\n\n  const { acceptCustomStyles = true } = options || {};\n  if (acceptCustomStyles) {\n    const style = document.createElement('style');\n    style.id = 'telegram-custom-styles';\n    document.head.appendChild(style);\n\n    addCleanup(\n      on('set_custom_style', html => {\n        // It is safe to use innerHTML here as long as style tag has a special behavior related\n        // to the specified content.\n        // In case any script will be passed here, it will not be executed, so XSS is not possible.\n        style.innerHTML = html;\n      }),\n      () => {\n        document.head.removeChild(style);\n      },\n    );\n  }\n\n  // Notify Telegram that the application is ready.\n  //\n  // This will result in sending style tag html content from the Telegram web application.\n  // We should call this method also to start receiving \"reload_iframe\" events from the Telegram\n  // application.\n  //\n  // It really has no effect outside non-Telegram web environment.\n  postEvent('iframe_ready', { reload_supported: true });\n\n  return cleanup;\n}"],"names":["i","e","r","a","b","t","E","R","S","w","h","y","n","o","c","p","d","s","l","f","A","u","g","D","P","m","U","N","O","W","_","T","V","j","I","B","classNames","values","value","isRecord","entry","mergeClassNames","partials","acc","partial","key","className","v","H","G","we","he","de","me","K","Z","$","Ee","z","ye","ve","Pe","Re","Te","Se","X","Ae","$e","Y","Q","Ne","Ce","ee","De","Ue","je","te","x","L","xe","ne","re","oe","M","ot","st","at","q","ge","F","it","se","ke","Le","ct","Oe","ft","lt","We","Ie","ae","Me","qe","Fe","C","ie","ce","Je","Be","He","Ge","Ve","Ke","ue","pe","fe","le","Ze","ze","Xe","Ye","_e","be","Qe","_t","k","et","bt","gt","wt","ht","dt","mt","tt","J","nt","Et","yt","$createRequestId","signal","requestId","$postEvent","_postEvent","$version","configure","options","optionsPostEvent","retrieveLaunchParams","createPostEvent","createRequestId","invokeCustomMethod","method","params","_invokeCustomMethod","postEvent","request","eventOrEvents","_request","subAndCall","fn","MINI_APPS_METHOD","CLICK_EVENT","STORAGE_KEY","hide","isVisible","isSupported","supports","isMounted","mount","isPageReload","getStorageValue","onStateChanged","setStorageValue","onClick","on","offClick","off","show","unmount","ERR_POPUP_INVALID_PARAMS","ERR_INVALID_HOSTNAME","ERR_INVALID_SLUG","ERR_DATA_INVALID_SIZE","ERR_ACCESS_DENIED","ERR_ALREADY_CALLED","ERR_NOT_AVAILABLE","createMountFn","onMounted","isMounting","mountError","mountOptions","CancelablePromise","TypedError","abortSignal","tuple","batch","error","state","isAuthenticating","isRequestingAccess","withIsSupported","additionalCheck","eventToState","event","GET_INFO_METHOD","requestBiometry","REQUEST_AUTH_METHOD","REQUEST_ACCESS_METHOD","OPEN_SETTINGS_METHOD","UPDATE_TOKEN_METHOD","BIOMETRY_INFO_RECEIVED_EVENT","authenticate","response","token","openSettings","requestAccess","info","result","onBiometryInfoReceived","updateToken","disableConfirmation","isConfirmationEnabled","enableConfirmation","deleteItem","keyOrKeys","keys","getItem","data","object","string","getKeys","array","setItem","impactOccurred","style","notificationOccurred","type","selectionChanged","fromState","computed","authDate","canSendAfter","canSendAfterDate","authDateValue","canSendAfterValue","chat","chatType","chatInstance","hash","queryId","raw","receiver","restore","lp","startParam","user","parseInitData","initData","isOpened","open","urlOrSlug","optionsOrType","slug","hostname","pathname","match","isColorDark","color","rgb","toRGB","modifier","idx","dec","isCssVarsBound","accentTextColor","backgroundColor","buttonColor","buttonTextColor","bottomBarBgColor","destructiveTextColor","headerBackgroundColor","hintColor","isDark","bgColor","linkColor","secondaryBackgroundColor","sectionBackgroundColor","sectionHeaderTextColor","sectionSeparatorColor","subtitleTextColor","textColor","internalState","hasShineEffect","isEnabled","isLoaderVisible","text","prev","onInternalStateChanged","setParams","updates","withSupports","schema","parseThemeParams","themeParams","THEME_CHANGED_EVENT","bindCssVars","getCSSVarName","prop","camelToKebab","forEachEntry","actualize","setCssVar","deleteCssVar","onThemeChanged","rgbBasedOn","isRGB","themeBgColor","themeSecondaryBgColor","backgroundColorRGB","bottomBarColor","bottomBarColorRGB","themeBottomBarBgColor","headerColor","headerColorRGB","SET_BG_COLOR_METHOD","SET_BOTTOM_BAR_BG_COLOR_METHOD","SET_HEADER_COLOR_METHOD","addCleanup","cleanup","createCbCollector","bind","cssVar","update","close","returnBack","tpMount","tpHeaderBackgroundColor","onBgColorChanged","onBottomBarBgColorChanged","onHeaderColorChanged","saveState","ready","setBackgroundColor","setBottomBarColor","setHeaderColor","prepareParams","message","title","buttons","id","buttonId","CLOSE_METHOD","OPEN_METHOD","CLOSED_EVENT","SCANNED_EVENT","onCaptured","capture","promise","EnhancedPromise","position","disableVertical","isVerticalEnabled","enableVertical","createStateComputed","height","isExpanded","isStable","stableHeight","width","props","expand","formatState","truncate","onViewportChanged","OPEN_TG_LINK_METHOD","openLink","url","createSafeURL","openTelegramLink","search","shareURL","REQUEST_PHONE_METHOD","REQUEST_WRITE_ACCESS_METHOD","isRequestingPhoneAccess","isRequestingWriteAccess","getRequestedContact","searchParams","number","date","requestContact","res","asyncOptions","requestPhoneAccess","sleepTime","sleep","requestWriteAccess","READ_TEXT_FROM_CLIPBOARD_METHOD","SWITCH_INLINE_QUERY_METHOD","SHARE_STORY_METHOD","readTextFromClipboard","reqId","captureSameReq","sendData","size","shareStory","mediaUrl","switchInlineQuery","query","chatTypes","isSSR","init","defineEventHandlers","removeEventHandlers","acceptCustomStyles","html"],"mappings":"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"}