"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});let me=class tn extends Error{constructor(t,n,o){super(typeof n=="object"?n.message:n||t,{cause:typeof n=="object"?n.cause:o}),this.type=t,Object.setPrototypeOf(this,tn.prototype)}};function nn(e){return e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)}function zs(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}const on="ERR_INVALID_VALUE",rn="ERR_UNEXPECTED_VALUE",sn="ERR_UNEXPECTED_TYPE",at="ERR_PARSE";function an(e,t){const n={};for(const o in e){const r=e[o];if(!r)continue;let s,i;typeof r=="function"?(s=o,i=r):[s,i]=r;try{const a=i(t(s));a!==void 0&&(n[o]=a)}catch(a){throw new me(at,`Parser for "${o}" property failed${s===o?"":`. Source field: "${s}"`}`,a)}}return n}function ct(e){let t=e;if(typeof t=="string")try{t=JSON.parse(t)}catch(n){throw new me(on,{cause:n})}if(typeof t!="object"||!t||Array.isArray(t))throw new me(rn);return t}function H(e,t){return n=>{const o=r=>{if(!(n&&r===void 0))try{return t(r)}catch(s){throw new me(at,{message:`"${e}" transformer failed to parse the value`,cause:s})}};return Object.assign(o,{isValid(r){try{return o(r),!0}catch{return!1}}})}}function xe(e,t){return H(t||"object",n=>{const o=ct(n);return an(e,r=>o[r])})}function Pe(e){throw new me(sn,`Unexpected value received: ${JSON.stringify(e)}`)}const Fs=H("boolean",e=>{if(typeof e=="boolean")return e;const t=String(e);if(t==="1"||t==="true")return!0;if(t==="0"||t==="false")return!1;Pe(e)}),k=H("string",e=>{if(typeof e=="string"||typeof e=="number")return e.toString();Pe(e)}),ke=H("number",e=>{if(typeof e=="number")return e;if(typeof e=="string"){const t=Number(e);if(!Number.isNaN(t))return t}Pe(e)}),cn=H("date",e=>e instanceof Date?e:new Date(ke()(e)*1e3));function un(e,t){return H(t||"searchParams",n=>{typeof n!="string"&&!(n instanceof URLSearchParams)&&Pe(n);const o=typeof n=="string"?new URLSearchParams(n):n;return an(e,r=>{const s=o.get(r);return s===null?void 0:s})})}function Xe(e){for(const t in e)e[t]=[nn(t),e[t]];return e}const Ys=e=>{const t=ke(),n=ke(!0),o=k(),r=k(!0),s=Fs(!0),i=xe(Xe({addedToAttachmentMenu:s,allowsWriteToPm:s,firstName:o,id:t,isBot:s,isPremium:s,languageCode:r,lastName:r,photoUrl:r,username:r}),"User")(!0);return un(Xe({authDate:cn(),canSendAfter:n,chat:xe(Xe({id:t,type:o,title:o,photoUrl:r,username:r}),"Chat")(!0),chatInstance:r,chatType:r,hash:o,queryId:r,receiver:i,startParam:r,user:i}),"initData")(e)};function Be(e){return/^#[\da-f]{6}$/i.test(e)}function ln(e){return/^#[\da-f]{3}$/i.test(e)}function ut(e){const t=e.replace(/\s/g,"").toLowerCase();if(Be(t))return t;if(ln(t)){let o="#";for(let r=0;r<3;r+=1)o+=t[1+r].repeat(2);return o}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((o,r)=>{const s=parseInt(r,10).toString(16);return o+(s.length===1?"0":"")+s},"#")}const Js=H("rgb",e=>ut(k()(e))),Ks=H("themeParams",e=>{const t=Js(!0);return Object.entries(ct(e)).reduce((n,[o,r])=>(n[zs(o)]=t(r),n),{})});function pn(e){return JSON.stringify(Object.fromEntries(Object.entries(e).map(([t,n])=>[nn(t),n])))}function Qs(e){const{initDataRaw:t,startParam:n,showSettings:o,botInline:r}=e,s=new URLSearchParams;return s.set("tgWebAppPlatform",e.platform),s.set("tgWebAppThemeParams",pn(e.themeParams)),s.set("tgWebAppVersion",e.version),t&&s.set("tgWebAppData",t),n&&s.set("tgWebAppStartParam",n),typeof o=="boolean"&&s.set("tgWebAppShowSettings",o?"1":"0"),typeof r=="boolean"&&s.set("tgWebAppBotInline",r?"1":"0"),s.toString()}function Zs(e,t){return H("array",n=>{let o;if(Array.isArray(n))o=n;else if(typeof n=="string")try{const r=JSON.parse(n);Array.isArray(r)&&(o=r)}catch{}return o||Pe(n),o.map(e)})}function lt(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function Ve(...e){return e.map(t=>{if(typeof t=="string")return t;if(lt(t))return Ve(Object.entries(t).map(n=>n[1]&&n[0]));if(Array.isArray(t))return Ve(...t)}).filter(Boolean).join(" ")}function Xs(...e){return e.reduce((t,n)=>(lt(n)&&Object.entries(n).forEach(([o,r])=>{const s=Ve(t[o],r);s&&(t[o]=s)}),t),{})}let ge=class fn extends Error{constructor(t,n,o){super(typeof n=="object"?n.message:n||t,{cause:typeof n=="object"?n.cause:o}),this.type=t,Object.setPrototypeOf(this,fn.prototype)}};function _n(e){return e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)}function ei(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}const ti="ERR_INVALID_VALUE",ni="ERR_UNEXPECTED_VALUE",oi="ERR_UNEXPECTED_TYPE",dn="ERR_PARSE";function hn(e,t){const n={};for(const o in e){const r=e[o];if(!r)continue;let s,i;typeof r=="function"?(s=o,i=r):[s,i]=r;try{const a=i(t(s));a!==void 0&&(n[o]=a)}catch(a){throw new ge(dn,`Parser for "${o}" property failed${s===o?"":`. Source field: "${s}"`}`,a)}}return n}function bn(e){let t=e;if(typeof t=="string")try{t=JSON.parse(t)}catch(n){throw new ge(ti,{cause:n})}if(typeof t!="object"||!t||Array.isArray(t))throw new ge(ni);return t}function O(e,t){return n=>{const o=r=>{if(!(n&&r===void 0))try{return t(r)}catch(s){throw new ge(dn,{message:`"${e}" transformer failed to parse the value`,cause:s})}};return Object.assign(o,{isValid(r){try{return o(r),!0}catch{return!1}}})}}function P(e,t){return O(t||"object",n=>{const o=bn(n);return hn(e,r=>o[r])})}function Oe(e){throw new ge(oi,`Unexpected value received: ${JSON.stringify(e)}`)}const Ne=O("boolean",e=>{if(typeof e=="boolean")return e;const t=String(e);if(t==="1"||t==="true")return!0;if(t==="0"||t==="false")return!1;Oe(e)}),$=O("string",e=>{if(typeof e=="string"||typeof e=="number")return e.toString();Oe(e)}),we=O("number",e=>{if(typeof e=="number")return e;if(typeof e=="string"){const t=Number(e);if(!Number.isNaN(t))return t}Oe(e)}),ri=O("date",e=>e instanceof Date?e:new Date(we()(e)*1e3));function mn(e,t){return O(t||"searchParams",n=>{typeof n!="string"&&!(n instanceof URLSearchParams)&&Oe(n);const o=typeof n=="string"?new URLSearchParams(n):n;return hn(e,r=>{const s=o.get(r);return s===null?void 0:s})})}function et(e){for(const t in e)e[t]=[_n(t),e[t]];return e}const si=e=>{const t=we(),n=we(!0),o=$(),r=$(!0),s=Ne(!0),i=P(et({addedToAttachmentMenu:s,allowsWriteToPm:s,firstName:o,id:t,isBot:s,isPremium:s,languageCode:r,lastName:r,photoUrl:r,username:r}),"User")(!0);return mn(et({authDate:ri(),canSendAfter:n,chat:P(et({id:t,type:o,title:o,photoUrl:r,username:r}),"Chat")(!0),chatInstance:r,chatType:r,hash:o,queryId:r,receiver:i,startParam:r,user:i}),"initData")(e)};function ii(e){return/^#[\da-f]{6}$/i.test(e)}function ai(e){return/^#[\da-f]{3}$/i.test(e)}function ci(e){const t=e.replace(/\s/g,"").toLowerCase();if(ii(t))return t;if(ai(t)){let o="#";for(let r=0;r<3;r+=1)o+=t[1+r].repeat(2);return o}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((o,r)=>{const s=parseInt(r,10).toString(16);return o+(s.length===1?"0":"")+s},"#")}const ui=O("rgb",e=>ci($()(e))),li=O("themeParams",e=>{const t=ui(!0);return Object.entries(bn(e)).reduce((n,[o,r])=>(n[ei(o)]=t(r),n),{})});function gn(e){return JSON.stringify(Object.fromEntries(Object.entries(e).map(([t,n])=>[_n(t),n])))}const pi=e=>{const t=$(),n=$(!0),o=Ne(!0);return mn({botInline:["tgWebAppBotInline",o],initData:["tgWebAppData",si(!0)],initDataRaw:["tgWebAppData",n],platform:["tgWebAppPlatform",t],showSettings:["tgWebAppShowSettings",o],startParam:["tgWebAppStartParam",n],themeParams:["tgWebAppThemeParams",li()],version:["tgWebAppVersion",t]},"launchParams")(e)};function fi(e){const{initDataRaw:t,startParam:n,showSettings:o,botInline:r}=e,s=new URLSearchParams;return s.set("tgWebAppPlatform",e.platform),s.set("tgWebAppThemeParams",gn(e.themeParams)),s.set("tgWebAppVersion",e.version),t&&s.set("tgWebAppData",t),n&&s.set("tgWebAppStartParam",n),typeof o=="boolean"&&s.set("tgWebAppShowSettings",o?"1":"0"),typeof r=="boolean"&&s.set("tgWebAppBotInline",r?"1":"0"),s.toString()}const wn=P({eventType:$(),eventData:e=>e},"miniAppsMessage"),En=O("fn",e=>{if(typeof e=="function")return e;Oe(e)});function _i(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}const di=P({TelegramWebviewProxy:P({postEvent:En()})()});function yn(e){return di().isValid(e)}function Sn(){try{return window.self!==window.top}catch{return!0}}var hi=Object.defineProperty,bi=(e,t,n)=>t in e?hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cn=(e,t,n)=>bi(e,typeof t!="symbol"?t+"":t,n);let p=class vn extends Error{constructor(t,n,o){super(typeof n=="object"?n.message:n||t,{cause:typeof n=="object"?n.cause:o}),this.type=t,Object.setPrototypeOf(this,vn.prototype)}};function Le(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function re(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function mi(e,t){return e instanceof p&&e.type===t}function pt(e){return t=>mi(t,e)}const ft="ERR_ABORTED",_t="ERR_CANCELED",dt="ERR_TIMED_OUT";function qt(e){return new p(ft,{cause:e})}const gi=pt(dt),wi=pt(ft),Ei=pt(_t);function Ut(e,t){return e.reject=t.reject,e}class d extends Promise{constructor(t,n){let o,r;typeof t=="function"?(o=t,r=n):r=t;let s,i;super((a,l)=>{r||(r={});const{abortSignal:u}=r;if(u&&u.aborted)return l(qt(u.reason));const[_,y]=re(),C=X=>(...Gs)=>(y(),X(...Gs)),Z=new AbortController,{signal:Y}=Z;i=C(X=>{Z.abort(X),l(X)}),s=C(a),u&&_(Le(u,"abort",()=>{i(qt(u.reason))}));const{timeout:Ze}=r;if(Ze){const X=setTimeout(()=>{i(new p(dt,`Timeout reached: ${Ze}ms`))},Ze);_(()=>{clearTimeout(X)})}o&&o(s,i,Y)}),Cn(this,"reject"),this.reject=i}static withFn(t,n){return new d((o,r,s)=>{try{const i=t(s);return i instanceof Promise?i.then(o,r):o(i)}catch(i){r(i)}},n)}static resolve(t){return new d(n=>{n(t)})}static reject(t){return new d((n,o)=>{o(t)})}cancel(){this.reject(new p(_t))}catch(t){return this.then(void 0,t)}finally(t){return Ut(super.finally(t),this)}then(t,n){return Ut(super.then(t,n),this)}}function Wt(e,t){return e.resolve=t.resolve,e}class ce extends d{constructor(t,n){let o,r;typeof t=="function"?(o=t,r=n):r=t;let s;super((i,a,l)=>{s=i,o&&o(i,a,l)},r),Cn(this,"resolve"),this.resolve=s}static withFn(t,n){return new ce((o,r,s)=>d.withFn(t,{abortSignal:s}).then(o,r),n)}static resolve(t){return new ce(n=>{n(t)})}static reject(t){return new ce((n,o)=>{o(t)})}catch(t){return this.then(void 0,t)}finally(t){return Wt(super.finally(t),this)}then(t,n){return Wt(super.then(t,n),this)}}function yi(e,t){return new d(n=>{setTimeout(n,e)},{abortSignal:t})}function $n(e){return`tapps/${e}`}function A(e,t){sessionStorage.setItem($n(e),JSON.stringify(t))}function R(e){const t=sessionStorage.getItem($n(e));try{return t?JSON.parse(t):void 0}catch{}}function ht(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Si(e,t){t||(t={});const{textColor:n,bgColor:o,shouldLog:r=!0}=t;function s(i,...a){if(!r||typeof r=="function"&&!r())return;const l="font-weight:bold;padding:0 5px;border-radius:5px";console[i](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${l};background-color: lightblue;color:black`,"",`${l};${n?`color:${n};`:""}${o?`background-color:${o}`:""}`,...a)}return[function(...i){s("log",...i)},function(...i){s("error",...i)}]}function qe(e,t){document.documentElement.style.setProperty(e,t)}function Ue(e){document.documentElement.style.removeProperty(e)}function Ci(e,t){t()}function se(e,t){t||(t={});const n=t.equals||Object.is;let o=[],r=e;const s=u=>{if(!n(r,u)){const _=r;r=u,Ci(l,()=>{[...o].forEach(([y,C])=>{y(u,_),C&&a(y,!0)})})}};function i(u){const _=typeof u!="object"?{once:u}:u;return{once:_.once||!1,signal:_.signal||!1}}const a=(u,_)=>{const y=i(_),C=o.findIndex(([Z,Y])=>Z===u&&Y.once===y.once&&Y.signal===y.signal);C>=0&&o.splice(C,1)},l=Object.assign(function(){return vi(l),r},{destroy(){o=[]},set:s,reset(){s(e)},sub(u,_){return o.push([u,i(_)]),()=>a(u,_)},unsub:a,unsubAll(){o=o.filter(u=>u[1].signal)}});return l}const tt=[];function vi(e){tt.length&&tt[tt.length-1].add(e)}const Tn=se(!1),[bt,$i]=Si("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:Tn}),Ti={clipboard_text_received:P({req_id:$(),data:e=>e===null?e:$(!0)(e)},"clipboard_text_received"),custom_method_invoked:P({req_id:$(),result:e=>e,error:$(!0)},"custom_method_invoked"),popup_closed:O("popup_closed",e=>e?P({button_id:t=>t==null?void 0:$()(t)})()(e):{}),viewport_changed:P({height:we(),width:e=>e==null?window.innerWidth:we()(e),is_state_stable:Ne(),is_expanded:Ne()},"viewport_changed")};function Ai(e){const t=window,[,n]=re(Le(t,"resize",()=>{e(["viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0}])}),Le(t,"message",o=>{if(o.source!==t.parent)return;let r;try{r=wn()(o.data)}catch{return}const{eventType:s,eventData:i}=r,a=Ti[s];try{const l=a?a()(i):i;bt("Event received:",l?{eventType:s,eventData:l}:{eventType:s}),e([s,l])}catch(l){$i([`An error occurred processing the "${s}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),r,l)}}));return n}const rt=se(),Gt=se();function An(){return Gt()||Gt.set(Ai(rt.set)),rt}const nt=se({});function Rn(e){let t=nt()[e];return t||(t=se(void 0,{equals(){return!1}}),An().sub(n=>{n&&n[0]===e&&t.set(n[1])}),nt.set({...nt(),[e]:t})),t}function S(e,t,n){return Rn(e).sub(t,n)}const Pn="ERR_METHOD_UNSUPPORTED",Bn="ERR_RETRIEVE_LP_FAILED",On="ERR_METHOD_PARAMETER_UNSUPPORTED",Dn="ERR_UNKNOWN_ENV",Mn="ERR_INVOKE_CUSTOM_METHOD_RESPONSE",In=se("https://web.telegram.org");function We(e,t){bt("Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window;if(yn(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}const o=JSON.stringify({eventType:e,eventData:t});if(Sn())return n.parent.postMessage(o,In());const{external:r}=n;if(P({notify:En()})().isValid(r)){r.notify(o);return}throw new p(Dn)}function Ge(e,t,n){n||(n={});const{capture:o}=n,[r,s]=re();return new d(i=>{(Array.isArray(t)?t:[t]).forEach(a=>{r(S(a,l=>{(!o||(Array.isArray(t)?o({event:a,payload:l}):o(l)))&&i(l)}))}),(n.postEvent||We)(e,n.params)},n).finally(s)}function mt(e){return pi()(e)}function xn(e){return mt(e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function Ri(){return xn(window.location.href)}function Pi(){const e=performance.getEntriesByType("navigation")[0];if(!e)throw new Error("Unable to get first navigation entry.");return xn(e.name)}const Bi="launchParams";function Oi(){return mt(R(Bi)||"")}function kn(e){A("launchParams",fi(e))}function Vn(e){return e instanceof Error?e.message+(e.cause?`
  ${Vn(e.cause)}`:""):JSON.stringify(e)}function K(){const e=[];for(const t of[Ri,Pi,Oi])try{const n=t();return kn(n),n}catch(n){e.push(n)}throw new p(Bn,["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment","Collected errors:",...e.map(t=>`— ${Vn(t)}`)].join(`
`))}function Di(e){if(e==="simple")try{return K(),!0}catch{return!1}return d.withFn(async()=>{if(yn(window))return!0;try{return await Ge("web_app_request_theme","theme_changed",{timeout:100}),!0}catch{return!1}},e)}function je(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}function Mi(e,t){if(typeof t=="string")try{const{eventType:n}=wn()(t);n==="web_app_request_theme"&&je("theme_changed",{theme_params:JSON.parse(gn(e))}),n==="web_app_request_viewport"&&je("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})}catch{}}function Ii(e){var t;const n=typeof e=="string"?mt(e):e;kn(n);const o=(t=window.TelegramWebviewProxy)==null?void 0:t.postEvent;window.TelegramWebviewProxy={postEvent(r,s){Mi(n.themeParams,JSON.stringify({eventType:r,eventData:s})),o==null||o(r,s)}},bt("Environment was mocked by the mockTelegramEnv function")}function Nn(){[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{let t=window;e.forEach((n,o,r)=>{if(o===r.length-1){t[n]=je;return}n in t||(t[n]={}),t=t[n]})})}function Ln(){["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]})}function z(e,t,n){Rn(e).unsub(t,n)}function xi(e,t){return An().sub(e,t)}function ki(e,t){rt.unsub(e,t)}function jn(e){return({req_id:t})=>t===e}function zt(e){return e.split(".").map(Number)}function Hn(e,t){const n=zt(e),o=zt(t),r=Math.max(n.length,o.length);for(let s=0;s<r;s+=1){const i=n[s]||0,a=o[s]||0;if(i!==a)return i>a?1:-1}return 0}function g(e,t){return Hn(e,t)<=0}function h(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return g("6.4",n);if(t==="try_browser")return g("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return g("6.9",n);if(e==="web_app_close"&&t==="return_back")return g("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return g("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return g("6.1",t);case"web_app_open_popup":return g("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return g("6.4",t);case"web_app_switch_inline_query":return g("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return g("6.9",t);case"web_app_setup_settings_button":return g("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return g("7.2",t);case"web_app_setup_swipe_behavior":return g("7.7",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return g("7.10",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function qn(e,t){t||(t="strict");const n=typeof t=="function"?t:o=>{const{method:r,version:s}=o;let i,a;if("param"in o?(i=`Parameter "${o.param}" of "${r}" method is unsupported in Mini Apps version ${s}`,a=On):(i=`Method "${r}" is unsupported in Mini Apps version ${s}`,a=Pn),t==="strict")throw new p(a,i);return console.warn(i)};return(o,r)=>h(o,e)?_i(r)&&o==="web_app_set_header_color"&&"color"in r&&!h(o,"color",e)?n({version:e,method:o,param:"color"}):We(o,r):n({version:e,method:o})}function Un(e,t,n,o){return Ge("web_app_invoke_custom_method","custom_method_invoked",{...o||{},params:{method:e,params:t,req_id:n},capture:jn(n)}).then(({result:r,error:s})=>{if(s)throw new p(Mn,s);return r})}function Vi(){return performance.getEntriesByType("navigation")[0]}function D(){const e=Vi();return!!e&&e.type==="reload"}function Ft(e,t){return e.startsWith(t)?e:`${t}${e}`}function Ni(e){return new URL(typeof e=="string"?e:[e.pathname||"",Ft(e.search||"","?"),Ft(e.hash||"","#")].join(""),"http://a")}let te;function Li(e,t){te&&te.set(e,t)||t()}function ji(e){if(te)return e();te=new Map;try{e()}finally{te.forEach(t=>t()),te=void 0}}function c(e,t){t||(t={});const n=t.equals||Object.is;let o=[],r=e;const s=u=>{if(!n(r,u)){const _=r;r=u,Li(l,()=>{[...o].forEach(([y,C])=>{y(u,_),C&&a(y,!0)})})}};function i(u){const _=typeof u!="object"?{once:u}:u;return{once:_.once||!1,signal:_.signal||!1}}const a=(u,_)=>{const y=i(_),C=o.findIndex(([Z,Y])=>Z===u&&Y.once===y.once&&Y.signal===y.signal);C>=0&&o.splice(C,1)},l=Object.assign(function(){return Hi(l),r},{destroy(){o=[]},set:s,reset(){s(e)},sub(u,_){return o.push([u,i(_)]),()=>a(u,_)},unsub:a,unsubAll(){o=o.filter(u=>u[1].signal)}});return l}const ue=[];function Hi(e){ue.length&&ue[ue.length-1].add(e)}function E(e,t){let n=new Set;const o=c(s(),t);function r(){o.set(s())}function s(){n.forEach(l=>l.unsub(r,{signal:!0}));const i=new Set;let a;ue.push(i);try{a=e()}finally{ue.pop()}return i.forEach(l=>{l.sub(r,{signal:!0})}),n=i,a}return Object.assign(function(){return o()},{destroy:o.destroy,sub:o.sub,unsub:o.unsub,unsubAll:o.unsubAll})}const Wn=c((()=>{let e=0;return()=>(e+=1).toString()})()),gt=c(We),b=c("0.0");function qi(e){e||(e={});const{postEvent:t}=e,n=e.version||K().version;b.set(n),gt.set(typeof t=="function"?t:qn(n,t))}function Gn(){return Wn()()}function De(e,t,n){return Un(e,t,Gn(),{...n||{},postEvent:f})}const M=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=f),Ge(e,t,n)),f=(e,t)=>gt()(e,t);function T(e,t){t(),e.sub(t)}const zn="web_app_setup_back_button",Fn="back_button_pressed",Yn="backButton";function Jn(){q.set(!1)}function Kn(){return h(zn,b())}const q=c(!1),Ee=c(!1);function Qn(){Ee()||(q.set(D()&&R(Yn)||!1),T(q,Zn),Ee.set(!0))}function Zn(){const e=q();f(zn,{is_visible:e}),A(Yn,e)}function Xn(e){return S(Fn,e)}function eo(e){z(Fn,e)}function to(){q.set(!0)}function no(){q.unsub(Zn),Ee.set(!1)}const Ui=Object.freeze(Object.defineProperty({__proto__:null,hide:Jn,isMounted:Ee,isSupported:Kn,isVisible:q,mount:Qn,offClick:eo,onClick:Xn,show:to,unmount:no},Symbol.toStringTag,{value:"Module"})),ee="ERR_POPUP_INVALID_PARAMS",wt="ERR_INVALID_HOSTNAME",oo="ERR_INVALID_SLUG",ro="ERR_DATA_INVALID_SIZE",so="ERR_ACCESS_DENIED",v="ERR_ALREADY_CALLED",Et="ERR_NOT_AVAILABLE";function io(e,t,{isMounting:n,isMounted:o,mountError:r}){return function(i){if(o())return d.resolve();if(n())throw new p(v);return n.set(!0),d.withFn(a=>e({abortSignal:a}),i).then(a=>[!0,a],a=>[!1,a]).then(a=>{ji(()=>{if(n.set(!1),o.set(!0),a[0])t(a[1]);else{const l=a[1];throw r.set(l),l}})})}}const B=c(),le=c(!1),pe=c(!1),yt=c(!1),St=c(!1),Ct=c(void 0);function I(e,t,n){return Object.assign(e,{isSupported(){return h(t,b())&&(!n||n())}})}function vt(e){return e.available?{available:!0,tokenSaved:e.token_saved,deviceId:e.device_id,accessRequested:e.access_requested,type:e.type,accessGranted:e.access_granted}:{available:!1}}const Yt="web_app_biometry_get_info",ao=I(e=>M(Yt,"biometry_info_received",e).then(vt),Yt),co="web_app_biometry_request_auth",Wi="web_app_biometry_request_access",Gi="web_app_biometry_open_settings",zi="web_app_biometry_update_token",$t="biometry_info_received",uo="biometry";function lo(e){if(le())return d.reject(new p(v));const t=B();return!t||!t.available?d.reject(new p(Et)):(le.set(!0),e||(e={}),M(co,"biometry_auth_requested",{...e,params:{reason:(e.reason||"").trim()}}).then(n=>{const{token:o}=n;return typeof o=="string"&&B.set({...t,token:o}),n}).finally(()=>{le.set(!1)}))}function Tt(){return h(co,b())}function po(){f(Gi)}function fo(e){return pe()?d.reject(new p(v)):(pe.set(!0),e||(e={}),M(Wi,$t,{...e,params:{reason:e.reason||""}}).then(vt).then(t=>{if(!t.available)throw new p(Et);return B.set(t),t.accessGranted}).finally(()=>{pe.set(!1)}))}const _o=io(e=>{if(!Tt())return{available:!1};const t=D()&&R(uo);return t||ao(e)},e=>{S($t,ho),T(B,bo),B.set(e)},{isMounted:yt,mountError:Ct,isMounting:St}),ho=e=>{B.set(vt(e))};function bo(){const e=B();e&&A(uo,e)}function mo(){z($t,ho),B.unsub(bo)}function go(e){return e||(e={}),M(zi,"biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(t=>t.status)}const Fi=Object.freeze(Object.defineProperty({__proto__:null,authenticate:lo,isAuthenticating:le,isMounted:yt,isMounting:St,isRequestingAccess:pe,isSupported:Tt,mount:_o,mountError:Ct,openSettings:po,requestAccess:fo,state:B,unmount:mo,updateToken:go},Symbol.toStringTag,{value:"Module"})),wo="closingConfirmation";function Eo(){U.set(!1)}const ye=c(!1),U=c(!1);function yo(){U.set(!0)}function So(){ye()||(U.set(D()&&R(wo)||!1),T(U,Co),ye.set(!0))}function Co(){const e=U();f("web_app_setup_closing_behavior",{need_confirmation:e}),A(wo,e)}function vo(){U.unsub(Co),ye.set(!1)}const Yi=Object.freeze(Object.defineProperty({__proto__:null,disableConfirmation:Eo,enableConfirmation:yo,isConfirmationEnabled:U,isMounted:ye,mount:So,unmount:vo},Symbol.toStringTag,{value:"Module"})),Ji="web_app_invoke_custom_method";function $o(e,t){const n=Array.isArray(e)?e:[e];return n.length?De("deleteStorageValues",{keys:n},t).then():d.resolve()}function To(e,t){const n=Array.isArray(e)?e:[e];return n.length?De("getStorageValues",{keys:n},t).then(o=>{const r=xe(Object.fromEntries(n.map(s=>[s,k()])))()(o);return Array.isArray(e)?r:r[e]}):d.resolve(typeof e=="string"?"":{})}function Ao(e){return De("getStorageKeys",{},e).then(Zs(k())())}function Ro(){return h(Ji,b())}function Po(e,t,n){return De("saveStorageValue",{key:e,value:t},n).then()}const Ki=Object.freeze(Object.defineProperty({__proto__:null,deleteItem:$o,getItem:To,getKeys:Ao,isSupported:Ro,setItem:Po},Symbol.toStringTag,{value:"Module"})),ze="web_app_trigger_haptic_feedback";function Bo(e){f(ze,{type:"impact",impact_style:e})}function Oo(){return h(ze,b())}function Do(e){f(ze,{type:"notification",notification_type:e})}function Mo(){f(ze,{type:"selection_change"})}const Qi=Object.freeze(Object.defineProperty({__proto__:null,impactOccurred:Bo,isSupported:Oo,notificationOccurred:Do,selectionChanged:Mo},Symbol.toStringTag,{value:"Module"})),Fe=c(void 0);function x(e){return E(()=>{const t=Fe();return t?t[e]:void 0})}const At=x("authDate"),Rt=x("canSendAfter"),Io=E(()=>{const e=At(),t=Rt();return t&&e?new Date(e.getTime()+t*1e3):void 0}),xo=x("chat"),ko=x("chatType"),Vo=x("chatInstance"),No=x("hash"),Lo=x("queryId"),Pt=c(),jo=x("receiver");function Ho(){const e=K();Fe.set(e.initData),Pt.set(e.initDataRaw)}const qo=x("startParam"),Uo=x("user"),Zi=Object.freeze(Object.defineProperty({__proto__:null,authDate:At,canSendAfter:Rt,canSendAfterDate:Io,chat:xo,chatInstance:Vo,chatType:ko,hash:No,queryId:Lo,raw:Pt,receiver:jo,restore:Ho,startParam:qo,state:Fe,user:Uo},Symbol.toStringTag,{value:"Module"}));function Xi(e){return Ys()(e)}const Wo="web_app_open_invoice",fe=c(!1);function Go(){return h(Wo,b())}async function zo(e,t,n){if(fe())throw new p(v);let o;if(t==="url"){const{hostname:r,pathname:s}=new URL(e,window.location.href);if(r!=="t.me")throw new p(wt);const i=s.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!i)throw new p(oo);[,,o]=i}else o=e,n=t;return fe.set(!0),M(Wo,"invoice_closed",{...n,params:{slug:o},capture:r=>o===r.slug}).then(r=>r.status).finally(()=>{fe.set(!1)})}const ea=Object.freeze(Object.defineProperty({__proto__:null,isOpened:fe,isSupported:Go,open:zo},Symbol.toStringTag,{value:"Module"}));function Bt(e){const t=ut(e);return Math.sqrt([.299,.587,.114].reduce((n,o,r)=>{const s=parseInt(t.slice(1+r*2,1+(r+1)*2),16);return n+s*s*o},0))<120}const Se=c(!1),_e=c(!1),V=c({});function m(e){return E(()=>V()[e])}const Fo=m("accentTextColor"),Ye=m("bgColor"),Je=m("buttonColor"),Ot=m("buttonTextColor"),Dt=m("bottomBarBgColor"),Yo=m("destructiveTextColor"),Mt=m("headerBgColor"),Jo=m("hintColor"),Ko=E(()=>{const{bgColor:e}=V();return!e||Bt(e)}),Qo=m("linkColor"),Ce=m("secondaryBgColor"),Zo=m("sectionBgColor"),Xo=m("sectionHeaderTextColor"),er=m("sectionSeparatorColor"),tr=m("subtitleTextColor"),nr=m("textColor");function Q(e){return E(()=>ie()[e])}const ne=c({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),ie=E(()=>{const e=ne();return{...e,backgroundColor:e.backgroundColor||Je()||"#2481cc",textColor:e.textColor||Ot()||"#ffffff"}}),ve=c(!1),or=Q("backgroundColor"),rr=Q("hasShineEffect"),sr=Q("isEnabled"),ir=Q("isLoaderVisible"),ar=Q("isVisible"),cr=Q("text"),ur=Q("textColor"),ta="web_app_setup_main_button",lr="main_button_pressed",pr="mainButton";function fr(){if(!ve()){const e=D()&&R(pr);e&&ne.set(e),ne.sub(hr),T(ie,br),ve.set(!0)}}function _r(e){return S(lr,e)}function dr(e){z(lr,e)}function hr(e){A(pr,e)}function br(){const e=ie();e.text&&f(ta,{color:e.backgroundColor,has_shine_effect:e.hasShineEffect,is_active:e.isEnabled,is_progress_visible:e.isLoaderVisible,is_visible:e.isVisible,text:e.text,text_color:e.textColor})}function mr(e){ne.set({...ne(),...Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))})}function gr(){ne.unsub(hr),ie.unsub(br),ve.set(!1)}const na=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:or,hasShineEffect:rr,isEnabled:sr,isLoaderVisible:ir,isMounted:ve,isVisible:ar,mount:fr,offClick:dr,onClick:_r,setParams:mr,state:ie,text:cr,textColor:ur,unmount:gr},Symbol.toStringTag,{value:"Module"}));function oa(e,t){return Object.assign(e,{supports(n){const o=t[n];return h(o[0],o[1],b())}})}function wr(e){return Ks()(e)}const Er="themeParams",yr="theme_changed";function Sr(e){if(_e())throw new p(v);e||(e=o=>`--tg-theme-${ht(o)}`);function t(o){Object.entries(V()).forEach(([r,s])=>{s&&o(r,s)})}function n(){t((o,r)=>{qe(e(o),r)})}return n(),V.sub(n),_e.set(!0),()=>{t(Ue),V.unsub(n),_e.set(!1)}}function It(){Se()||(S(yr,Cr),V.set(D()&&R(Er)||K().themeParams),Se.set(!0))}const Cr=e=>{const t=wr(e.theme_params);V.set(t),A(Er,t)};function vr(){z(yr,Cr),Se.set(!1)}function $r(e){return E(()=>{const t=e();return Be(t)?t:t==="bg_color"?Ye():Ce()})}const N=c("bg_color"),xt=$r(N),L=c("bottom_bar_bg_color"),Ke=E(()=>{const e=L();return Be(e)?e:e==="bottom_bar_bg_color"?Dt()||Ce():e==="secondary_bg_color"?Ce():Ye()}),j=c("bg_color"),kt=$r(j),$e=c(!1),de=c(!1),Tr=E(()=>{const e=xt();return e?Bt(e):!1}),Vt=E(()=>({backgroundColor:N(),bottomBarColor:L(),headerColor:j()})),Ar="web_app_set_background_color",Rr="web_app_set_bottom_bar_color",st="web_app_set_header_color",Pr="miniApp";function Br(e){if(de())throw new p(v);const[t,n]=re();function o(r,s){function i(){qe(r,s()||null)}i(),t(s.sub(i),Ue.bind(null,r))}return e||(e=r=>`--tg-${ht(r)}`),o(e("bgColor"),xt),o(e("bottomBarColor"),Ke),o(e("headerColor"),kt),t(()=>{de.set(!1)}),de.set(!0),n}function Or(e){f("web_app_close",{return_back:e})}function Dr(){if(!$e()){const e=D()&&R(Pr);It(),N.set(e?e.backgroundColor:"bg_color"),L.set(e?e.bottomBarColor:"bottom_bar_bg_color"),j.set(e?e.headerColor:Mt()||"bg_color"),T(N,Mr),T(L,Ir),T(j,xr),$e.set(!0)}}function Mr(){const e=N();Nt(),f(Ar,{color:e})}function Ir(){Nt(),f(Rr,{color:L()})}function xr(){const e=j();Nt(),f(st,Be(e)?{color:e}:{color_key:e})}function kr(){f("web_app_ready")}function Nt(){A(Pr,Vt())}const Vr=I(e=>{N.set(e)},Ar),Nr=I(e=>{L.set(e)},Rr),Lr=oa(I(e=>{j.set(e)},st),{color:[st,"color"]});function jr(){N.unsub(Mr),L.unsub(Ir),j.unsub(xr),$e.set(!1)}const ra=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:N,backgroundColorRGB:xt,bindCssVars:Br,bottomBarColor:L,bottomBarColorRGB:Ke,close:Or,headerColor:j,headerColorRGB:kt,isCssVarsBound:de,isDark:Tr,isMounted:$e,mount:Dr,ready:kr,setBackgroundColor:Vr,setBottomBarColor:Nr,setHeaderColor:Lr,state:Vt,unmount:jr},Symbol.toStringTag,{value:"Module"}));function sa(e){const t=e.message.trim(),n=(e.title||"").trim(),o=e.buttons||[];if(n.length>64)throw new p(ee,`Invalid title: ${n}`);if(!t||t.length>256)throw new p(ee,`Invalid message: ${t}`);if(o.length>3)throw new p(ee,`Invalid buttons count: ${o.length}`);return{title:n,message:t,buttons:o.length?o.map((r,s)=>{const i=r.id||"";if(i.length>64)throw new p(ee,`Button with index ${s} has invalid id: ${i}`);if(!r.type||r.type==="default"||r.type==="destructive"){const a=r.text.trim();if(!a||a.length>64)throw new p(ee,`Button with index ${s} has invalid text: ${a}`);return{type:r.type,text:a,id:i}}return{type:r.type,id:i}}):[{type:"close",id:""}]}}const Hr="web_app_open_popup";function qr(){return h(Hr,b())}const he=c(!1);async function Ur(e){if(he())throw new p(v);he.set(!0);try{const{button_id:t=null}=await M(Hr,"popup_closed",{...e,params:sa(e)});return t}finally{he.set(!1)}}const ia=Object.freeze(Object.defineProperty({__proto__:null,isOpened:he,isSupported:qr,open:Ur},Symbol.toStringTag,{value:"Module"})),aa="web_app_close_scan_qr_popup",Wr="web_app_open_scan_qr_popup",ca="scan_qr_popup_closed",ua="qr_text_received";function He(){J.set(!1),f(aa)}const J=c(!1);function Gr(){return h(Wr,b())}function zr(e){return d.withFn(t=>{if(J())throw new p(v);J.set(!0),e||(e={});const{onCaptured:n,text:o,capture:r}=e,[,s]=re(J.sub(()=>{i.resolve()}),S(ca,()=>{J.set(!1)}),S(ua,a=>{n?n(a.data):r&&r(a.data)&&(i.resolve(a.data),He())})),i=new ce({abortSignal:t}).catch(He).finally(s);return(e.postEvent||f)(Wr,{text:o}),i},e)}const la=Object.freeze(Object.defineProperty({__proto__:null,close:He,isOpened:J,isSupported:Gr,open:zr},Symbol.toStringTag,{value:"Module"}));function F(e){return E(()=>ae()[e])}const oe=c({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),ae=E(()=>{const e=oe();return{...e,backgroundColor:e.backgroundColor||Ke()||"#000000",textColor:e.textColor||Je()||"#2481cc"}}),Te=c(!1),Fr=F("backgroundColor"),Yr=F("hasShineEffect"),Jr=F("isEnabled"),Kr=F("isLoaderVisible"),Qr=F("isVisible"),Zr=F("position"),Xr=F("text"),es=F("textColor"),ts="web_app_setup_secondary_button",ns="secondary_button_pressed",os="secondaryButton";function rs(){return h(ts,b())}function ss(){if(!Te()){const e=D()&&R(os);e&&oe.set(e),oe.sub(cs),T(ae,us),Te.set(!0)}}function is(e){return S(ns,e)}function as(e){z(ns,e)}function cs(e){A(os,e)}function us(){const e=ae();e.text&&f(ts,{color:e.backgroundColor,has_shine_effect:e.hasShineEffect,is_active:e.isEnabled,is_progress_visible:e.isLoaderVisible,is_visible:e.isVisible,position:e.position,text:e.text,text_color:e.textColor})}function ls(e){oe.set({...oe(),...Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))})}function ps(){oe.unsub(cs),ae.unsub(us),Te.set(!1)}const pa=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Fr,hasShineEffect:Yr,isEnabled:Jr,isLoaderVisible:Kr,isMounted:Te,isSupported:rs,isVisible:Qr,mount:ss,offClick:as,onClick:is,position:Zr,setParams:ls,state:ae,text:Xr,textColor:es,unmount:ps},Symbol.toStringTag,{value:"Module"})),fs="web_app_setup_settings_button",_s="settings_button_pressed",ds="settingsButton";function hs(){W.set(!1)}const W=c(!1),Ae=c(!1);function bs(){return h(fs,b())}function ms(){Ae()||(W.set(D()&&R(ds)||!1),T(W,gs),Ae.set(!0))}function gs(){const e=W();f(fs,{is_visible:e}),A(ds,e)}function ws(e){return S(_s,e)}function Es(e){z(_s,e)}function ys(){W.set(!0)}function Ss(){W.unsub(gs),Ae.set(!1)}const fa=Object.freeze(Object.defineProperty({__proto__:null,hide:hs,isMounted:Ae,isSupported:bs,isVisible:W,mount:ms,offClick:Es,onClick:ws,show:ys,unmount:Ss},Symbol.toStringTag,{value:"Module"})),Cs="web_app_setup_swipe_behavior",vs="swipeBehavior";function $s(){G.set(!1)}function Ts(){G.set(!0)}const Re=c(!1),G=c(!1);function As(){return h(Cs,b())}function Rs(){Re()||(G.set(D()&&R(vs)||!1),T(G,Ps),Re.set(!0))}function Ps(){const e=G();f(Cs,{allow_vertical_swipe:e}),A(vs,e)}function Bs(){G.unsub(Ps),Re.set(!1)}const _a=Object.freeze(Object.defineProperty({__proto__:null,disableVertical:$s,enableVertical:Ts,isMounted:Re,isSupported:As,isVerticalEnabled:G,mount:Rs,unmount:Bs},Symbol.toStringTag,{value:"Module"})),da=Object.freeze(Object.defineProperty({__proto__:null,accentTextColor:Fo,backgroundColor:Ye,bindCssVars:Sr,bottomBarBgColor:Dt,buttonColor:Je,buttonTextColor:Ot,destructiveTextColor:Yo,headerBackgroundColor:Mt,hintColor:Jo,isCssVarsBound:_e,isDark:Ko,isMounted:Se,linkColor:Qo,mount:It,secondaryBackgroundColor:Ce,sectionBackgroundColor:Zo,sectionHeaderTextColor:Xo,sectionSeparatorColor:er,state:V,subtitleTextColor:tr,textColor:nr,unmount:vr},Symbol.toStringTag,{value:"Module"})),w=c({height:0,width:0,isExpanded:!1,stableHeight:0}),Lt=c(!1),be=c(!1),jt=c(!1),Ht=c(void 0);function Qe(e){return E(()=>w()[e])}const Os=Qe("height"),Ds=Qe("isExpanded"),Ms=E(()=>{const e=w();return e.height===e.stableHeight}),Is=Qe("stableHeight"),xs=Qe("width");function ha(e){return M("web_app_request_viewport","viewport_changed",e).then(t=>({height:t.height,width:t.width,isExpanded:t.is_expanded,isStable:t.is_state_stable}))}function ks(e){if(be())throw new p(v);e||(e=o=>`--tg-viewport-${ht(o)}`);const t=["height","width","stableHeight"];function n(){t.forEach(o=>{qe(e(o),`${w()[o]}px`)})}return n(),w.sub(n),be.set(!0),()=>{t.forEach(Ue),w.unsub(n),be.set(!1)}}function Vs(){f("web_app_expand")}function Ns(e){return{isExpanded:e.isExpanded,height:ot(e.height),width:ot(e.width),stableHeight:ot(e.stableHeight)}}const Ls=io(e=>{const t=D()&&R("viewport");if(t)return t;if(["macos","tdesktop","unigram","webk","weba","web"].includes(K().platform)){const n=window;return{isExpanded:!0,height:n.innerHeight,width:n.innerWidth,stableHeight:n.innerHeight}}return e.timeout||(e.timeout=1e3),ha(e).then(n=>({height:n.height,isExpanded:n.isExpanded,stableHeight:n.isStable?n.height:w().stableHeight,width:n.width}))},e=>{S("viewport_changed",js),T(w,Hs),w.set(Ns(e))},{isMounted:Lt,isMounting:jt,mountError:Ht}),js=e=>{w.set(Ns({height:e.height,width:e.width,isExpanded:e.is_expanded,stableHeight:e.is_state_stable?e.height:w().stableHeight}))};function Hs(){A("viewport",w())}function ot(e){return Math.max(e,0)}function qs(){z("viewport_changed",js),w.unsub(Hs)}const ba=Object.freeze(Object.defineProperty({__proto__:null,bindCssVars:ks,expand:Vs,height:Os,isCssVarsBound:be,isExpanded:Ds,isMounted:Lt,isMounting:jt,isStable:Ms,mount:Ls,mountError:Ht,stableHeight:Is,state:w,unmount:qs,width:xs},Symbol.toStringTag,{value:"Module"})),Jt="web_app_open_tg_link";function ma(e,t){t||(t={}),f("web_app_open_link",{url:Ni(e).toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})}function Us(e){const{hostname:t,pathname:n,search:o}=new URL(e,"https://t.me");if(t!=="t.me")throw new p(wt);if(!h(Jt,b())){window.location.href=e;return}f(Jt,{path_full:n+o})}function ga(e,t){Us("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))}const it="web_app_request_phone",Kt="web_app_request_write_access",Me=c(!1),Ie=c(!1);function Qt(e){return e||(e={}),De("getRequestedContact",{},{...e,timeout:e.timeout||5e3}).then(un({contact:xe({userId:["user_id",ke()],phoneNumber:["phone_number",k()],firstName:["first_name",k()],lastName:["last_name",k(!0)]})(),authDate:["auth_date",cn()],hash:k()})())}const wa=I(e=>new d(async(t,n,o)=>{const r={postEvent:(e||{}).postEvent,abortSignal:o};try{return t(await Qt(r))}catch{}if(await Ws(r)!=="sent")throw new p(so);let i=50;for(;!o.aborted;){try{return t(await Qt(r))}catch{}await yi(i),i+=50}},e),it),Ws=I(e=>{if(Me())throw new p(v);return Me.set(!0),M(it,"phone_requested",e).then(t=>t.status).finally(()=>{Me.set(!1)})},it),Ea=I(e=>{if(Ie())throw new p(v);return Ie.set(!0),M(Kt,"write_access_requested",e).then(t=>t.status).finally(()=>{Ie.set(!1)})},Kt),Zt="web_app_read_text_from_clipboard",Xt="web_app_switch_inline_query",en="web_app_share_to_story",ya=I(e=>{const t=Gn();return M(Zt,"clipboard_text_received",{...e,params:{req_id:t},capture:jn(t)}).then(({data:n=null})=>n)},Zt);function Sa(e){const{size:t}=new Blob([e]);if(!t||t>4096)throw new p(ro);f("web_app_data_send",{data:e})}const Ca=I((e,t)=>{t||(t={}),(t.postEvent||f)(en,{text:t.text,media_url:e,widget_link:t.widgetLink})},en),va=I((e,t)=>{f(Xt,{query:e,chat_types:t||[]})},Xt,()=>!!K().botInline);function $a(){return typeof window>"u"}function Ta(e){qi(e),Nn();const[t,n]=re(S("reload_iframe",()=>{f("iframe_will_reload"),window.location.reload()}),Ln),{acceptCustomStyles:o=!0}=e||{};if(o){const r=document.createElement("style");r.id="telegram-custom-styles",document.head.appendChild(r),t(S("set_custom_style",s=>{r.innerHTML=s}),()=>{document.head.removeChild(r)})}return f("iframe_ready",{reload_supported:!0}),n}exports.$createRequestId=Wn;exports.$debug=Tn;exports.$postEvent=gt;exports.$targetOrigin=In;exports.$version=b;exports.CancelablePromise=d;exports.ERR_ABORTED=ft;exports.ERR_ACCESS_DENIED=so;exports.ERR_ALREADY_CALLED=v;exports.ERR_CANCELED=_t;exports.ERR_CUSTOM_METHOD_ERR_RESPONSE=Mn;exports.ERR_DATA_INVALID_SIZE=ro;exports.ERR_INVALID_HOSTNAME=wt;exports.ERR_INVALID_SLUG=oo;exports.ERR_INVALID_VALUE=on;exports.ERR_METHOD_PARAMETER_UNSUPPORTED=On;exports.ERR_METHOD_UNSUPPORTED=Pn;exports.ERR_NOT_AVAILABLE=Et;exports.ERR_PARSE=at;exports.ERR_POPUP_INVALID_PARAMS=ee;exports.ERR_RETRIEVE_LP_FAILED=Bn;exports.ERR_TIMED_OUT=dt;exports.ERR_UNEXPECTED_TYPE=sn;exports.ERR_UNEXPECTED_VALUE=rn;exports.ERR_UNKNOWN_ENV=Dn;exports.TypedError=p;exports.addEventListener=Le;exports.authenticateBiometry=lo;exports.backButton=Ui;exports.bindMiniAppCssVars=Br;exports.bindThemeParamsCssVars=Sr;exports.bindViewportCssVars=ks;exports.biometry=Fi;exports.biometryMountError=Ct;exports.biometryState=B;exports.classNames=Ve;exports.closeMiniApp=Or;exports.closeQrScanner=He;exports.closingBehavior=Yi;exports.cloudStorage=Ki;exports.compareVersions=Hn;exports.createPostEvent=qn;exports.defineEventHandlers=Nn;exports.deleteCloudStorageItem=$o;exports.deleteCssVar=Ue;exports.disableClosingConfirmation=Eo;exports.disableVerticalSwipes=$s;exports.emitMiniAppsEvent=je;exports.enableClosingConfirmation=yo;exports.enableVerticalSwipes=Ts;exports.expandViewport=Vs;exports.getCloudStorageItem=To;exports.getCloudStorageKeys=Ao;exports.hapticFeedback=Qi;exports.hapticFeedbackImpactOccurred=Bo;exports.hapticFeedbackNotificationOccurred=Do;exports.hapticFeedbackSelectionChanged=Mo;exports.hideBackButton=Jn;exports.hideSettingsButton=hs;exports.init=Ta;exports.initData=Zi;exports.initDataAuthDate=At;exports.initDataCanSendAfter=Rt;exports.initDataCanSendAfterDate=Io;exports.initDataChat=xo;exports.initDataChatInstance=Vo;exports.initDataChatType=ko;exports.initDataHash=No;exports.initDataQueryId=Lo;exports.initDataRaw=Pt;exports.initDataReceiver=jo;exports.initDataStartParam=qo;exports.initDataState=Fe;exports.initDataUser=Uo;exports.invoice=ea;exports.invokeCustomMethod=Un;exports.isAbortError=wi;exports.isAuthenticatingBiometry=le;exports.isBackButtonMounted=Ee;exports.isBackButtonSupported=Kn;exports.isBackButtonVisible=q;exports.isBiometryMounted=yt;exports.isBiometryMounting=St;exports.isBiometrySupported=Tt;exports.isCanceledError=Ei;exports.isClosingBehaviorMounted=ye;exports.isClosingConfirmationEnabled=U;exports.isCloudStorageSupported=Ro;exports.isColorDark=Bt;exports.isHapticFeedbackSupported=Oo;exports.isIframe=Sn;exports.isInvoiceOpened=fe;exports.isInvoiceSupported=Go;exports.isMainButtonEnabled=sr;exports.isMainButtonLoaderVisible=ir;exports.isMainButtonMounted=ve;exports.isMainButtonVisible=ar;exports.isMiniAppCssVarsBound=de;exports.isMiniAppDark=Tr;exports.isMiniAppMounted=$e;exports.isPopupOpened=he;exports.isPopupSupported=qr;exports.isQrScannerOpened=J;exports.isQrScannerSupported=Gr;exports.isRGB=Be;exports.isRGBShort=ln;exports.isRecord=lt;exports.isRequestingBiometryAccess=pe;exports.isRequestingPhoneAccess=Me;exports.isRequestingWriteAccess=Ie;exports.isSSR=$a;exports.isSecondaryButtonEnabled=Jr;exports.isSecondaryButtonLoaderVisible=Kr;exports.isSecondaryButtonMounted=Te;exports.isSecondaryButtonSupported=rs;exports.isSecondaryButtonVisible=Qr;exports.isSettingsButtonMounted=Ae;exports.isSettingsButtonSupported=bs;exports.isSettingsButtonVisible=W;exports.isSwipeBehaviorMounted=Re;exports.isSwipeBehaviorSupported=As;exports.isTMA=Di;exports.isThemeParamsCssVarsBound=_e;exports.isThemeParamsDark=Ko;exports.isThemeParamsMounted=Se;exports.isTimeoutError=gi;exports.isVerticalSwipesEnabled=G;exports.isViewportCssVarsBound=be;exports.isViewportExpanded=Ds;exports.isViewportMounted=Lt;exports.isViewportMounting=jt;exports.isViewportStable=Ms;exports.mainButton=na;exports.mainButtonBackgroundColor=or;exports.mainButtonHasShineEffect=rr;exports.mainButtonState=ie;exports.mainButtonText=cr;exports.mainButtonTextColor=ur;exports.mergeClassNames=Xs;exports.miniApp=ra;exports.miniAppBackgroundColor=N;exports.miniAppBottomBarColor=L;exports.miniAppBottomBarColorRGB=Ke;exports.miniAppHeaderColor=j;exports.miniAppHeaderColorRGB=kt;exports.miniAppReady=kr;exports.miniAppState=Vt;exports.mockTelegramEnv=Ii;exports.mountBackButton=Qn;exports.mountBiometry=_o;exports.mountClosingBehavior=So;exports.mountMainButton=fr;exports.mountMiniApp=Dr;exports.mountSecondaryButton=ss;exports.mountSettingsButton=ms;exports.mountSwipeBehavior=Rs;exports.mountThemeParams=It;exports.mountViewport=Ls;exports.off=z;exports.offBackButtonClick=eo;exports.offMainButtonClick=dr;exports.offSecondaryButtonClick=as;exports.offSettingsButtonClick=Es;exports.on=S;exports.onBackButtonClick=Xn;exports.onMainButtonClick=_r;exports.onSecondaryButtonClick=is;exports.onSettingsButtonClick=ws;exports.openBiometrySettings=po;exports.openInvoice=zo;exports.openLink=ma;exports.openPopup=Ur;exports.openQrScanner=zr;exports.openTelegramLink=Us;exports.parseInitData=Xi;exports.parseThemeParams=wr;exports.popup=ia;exports.postEvent=We;exports.qrScanner=la;exports.readTextFromClipboard=ya;exports.removeEventHandlers=Ln;exports.request=Ge;exports.requestBiometry=ao;exports.requestBiometryAccess=fo;exports.requestContact=wa;exports.requestPhoneAccess=Ws;exports.requestWriteAccess=Ea;exports.restoreInitData=Ho;exports.retrieveLaunchParams=K;exports.secondaryButton=pa;exports.secondaryButtonBackgroundColor=Fr;exports.secondaryButtonHasShineEffect=Yr;exports.secondaryButtonPosition=Zr;exports.secondaryButtonState=ae;exports.secondaryButtonText=Xr;exports.secondaryButtonTextColor=es;exports.sendData=Sa;exports.serializeLaunchParams=Qs;exports.serializeThemeParams=pn;exports.setCloudStorageItem=Po;exports.setCssVar=qe;exports.setMainButtonParams=mr;exports.setMiniAppBackgroundColor=Vr;exports.setMiniAppBottomBarColor=Nr;exports.setMiniAppHeaderColor=Lr;exports.setSecondaryButtonParams=ls;exports.settingsButton=fa;exports.shareStory=Ca;exports.shareURL=ga;exports.showBackButton=to;exports.showSettingsButton=ys;exports.subscribe=xi;exports.supports=h;exports.swipeBehavior=_a;exports.switchInlineQuery=va;exports.themeParams=da;exports.themeParamsAccentTextColor=Fo;exports.themeParamsBackgroundColor=Ye;exports.themeParamsBottomBarBgColor=Dt;exports.themeParamsButtonColor=Je;exports.themeParamsButtonTextColor=Ot;exports.themeParamsDestructiveTextColor=Yo;exports.themeParamsHeaderBackgroundColor=Mt;exports.themeParamsHintColor=Jo;exports.themeParamsLinkColor=Qo;exports.themeParamsSecondaryBackgroundColor=Ce;exports.themeParamsSectionBackgroundColor=Zo;exports.themeParamsSectionHeaderTextColor=Xo;exports.themeParamsSectionSeparatorColor=er;exports.themeParamsState=V;exports.themeParamsSubtitleTextColor=tr;exports.themeParamsTextColor=nr;exports.toRGB=ut;exports.toRecord=ct;exports.unmountBackButton=no;exports.unmountBiometry=mo;exports.unmountClosingBehavior=vo;exports.unmountMainButton=gr;exports.unmountMiniApp=jr;exports.unmountSecondaryButton=ps;exports.unmountSettingsButton=Ss;exports.unmountSwipeBehavior=Bs;exports.unmountThemeParams=vr;exports.unmountViewport=qs;exports.unsubscribe=ki;exports.updateBiometryToken=go;exports.viewport=ba;exports.viewportHeight=Os;exports.viewportMountError=Ht;exports.viewportStableHeight=Is;exports.viewportState=w;exports.viewportWidth=xs;
//# sourceMappingURL=index.cjs.map
